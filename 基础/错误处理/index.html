<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GOFamily - go ç¨‹åºå‘˜å®å…¸</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="/GOFamily/favicon.ico">
    <meta name="description" content="ğŸ”¥ go ç¨‹åºå‘˜å®å…¸ï¼ŒåŒ…å«äº†ï¼šç®—æ³•ï¼Œæ•°æ®åº“ï¼Œç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œåˆ†å¸ƒå¼ï¼Œç³»ç»Ÿè®¾è®¡ç­‰ä¸€æ½å­çŸ¥è¯†ä½“ç³»">
    
    <link rel="preload" href="/GOFamily/assets/css/0.styles.93ee3edc.css" as="style"><link rel="preload" href="/GOFamily/assets/js/app.6dac5fbf.js" as="script"><link rel="preload" href="/GOFamily/assets/js/2.5c331e53.js" as="script"><link rel="preload" href="/GOFamily/assets/js/44.5dc33e34.js" as="script"><link rel="prefetch" href="/GOFamily/assets/js/10.993cf521.js"><link rel="prefetch" href="/GOFamily/assets/js/100.8a13422e.js"><link rel="prefetch" href="/GOFamily/assets/js/101.56e8a149.js"><link rel="prefetch" href="/GOFamily/assets/js/102.0befb22b.js"><link rel="prefetch" href="/GOFamily/assets/js/103.318b2dd9.js"><link rel="prefetch" href="/GOFamily/assets/js/104.5190ec56.js"><link rel="prefetch" href="/GOFamily/assets/js/105.27135b71.js"><link rel="prefetch" href="/GOFamily/assets/js/106.ee0a923b.js"><link rel="prefetch" href="/GOFamily/assets/js/107.abf9bc9d.js"><link rel="prefetch" href="/GOFamily/assets/js/108.339b1d12.js"><link rel="prefetch" href="/GOFamily/assets/js/109.7ee4cfe4.js"><link rel="prefetch" href="/GOFamily/assets/js/11.0307bcae.js"><link rel="prefetch" href="/GOFamily/assets/js/110.25bb24d2.js"><link rel="prefetch" href="/GOFamily/assets/js/111.800f7506.js"><link rel="prefetch" href="/GOFamily/assets/js/112.b73333d2.js"><link rel="prefetch" href="/GOFamily/assets/js/113.3bed7499.js"><link rel="prefetch" href="/GOFamily/assets/js/114.c126b120.js"><link rel="prefetch" href="/GOFamily/assets/js/115.773ca7ce.js"><link rel="prefetch" href="/GOFamily/assets/js/12.521ef871.js"><link rel="prefetch" href="/GOFamily/assets/js/13.6a579e8b.js"><link rel="prefetch" href="/GOFamily/assets/js/14.fa863532.js"><link rel="prefetch" href="/GOFamily/assets/js/15.ccbbdb7a.js"><link rel="prefetch" href="/GOFamily/assets/js/16.2a7384f8.js"><link rel="prefetch" href="/GOFamily/assets/js/17.50442aef.js"><link rel="prefetch" href="/GOFamily/assets/js/18.4b8a1599.js"><link rel="prefetch" href="/GOFamily/assets/js/19.fce83f0a.js"><link rel="prefetch" href="/GOFamily/assets/js/20.c57281b8.js"><link rel="prefetch" href="/GOFamily/assets/js/21.19939807.js"><link rel="prefetch" href="/GOFamily/assets/js/22.a6f2abf2.js"><link rel="prefetch" href="/GOFamily/assets/js/23.a3a10d16.js"><link rel="prefetch" href="/GOFamily/assets/js/24.edf743ad.js"><link rel="prefetch" href="/GOFamily/assets/js/25.c1fe94a5.js"><link rel="prefetch" href="/GOFamily/assets/js/26.529d156a.js"><link rel="prefetch" href="/GOFamily/assets/js/27.baf2939d.js"><link rel="prefetch" href="/GOFamily/assets/js/28.69e5608b.js"><link rel="prefetch" href="/GOFamily/assets/js/29.742dd6e8.js"><link rel="prefetch" href="/GOFamily/assets/js/3.159fe1e3.js"><link rel="prefetch" href="/GOFamily/assets/js/30.4aafb94a.js"><link rel="prefetch" href="/GOFamily/assets/js/31.87baab0b.js"><link rel="prefetch" href="/GOFamily/assets/js/32.1ea926c5.js"><link rel="prefetch" href="/GOFamily/assets/js/33.4d31d0db.js"><link rel="prefetch" href="/GOFamily/assets/js/34.7610889f.js"><link rel="prefetch" href="/GOFamily/assets/js/35.07f8b036.js"><link rel="prefetch" href="/GOFamily/assets/js/36.d1acb39c.js"><link rel="prefetch" href="/GOFamily/assets/js/37.1fac0e0a.js"><link rel="prefetch" href="/GOFamily/assets/js/38.53670642.js"><link rel="prefetch" href="/GOFamily/assets/js/39.9c8315fb.js"><link rel="prefetch" href="/GOFamily/assets/js/4.a73c4d70.js"><link rel="prefetch" href="/GOFamily/assets/js/40.c47687be.js"><link rel="prefetch" href="/GOFamily/assets/js/41.73deb46e.js"><link rel="prefetch" href="/GOFamily/assets/js/42.85cfacd9.js"><link rel="prefetch" href="/GOFamily/assets/js/43.1b441a63.js"><link rel="prefetch" href="/GOFamily/assets/js/45.e7e66273.js"><link rel="prefetch" href="/GOFamily/assets/js/46.146ccd16.js"><link rel="prefetch" href="/GOFamily/assets/js/47.aa0964bb.js"><link rel="prefetch" href="/GOFamily/assets/js/48.0f67a15e.js"><link rel="prefetch" href="/GOFamily/assets/js/49.565c30a8.js"><link rel="prefetch" href="/GOFamily/assets/js/5.864fc44c.js"><link rel="prefetch" href="/GOFamily/assets/js/50.0f964c86.js"><link rel="prefetch" href="/GOFamily/assets/js/51.9dd5ff4a.js"><link rel="prefetch" href="/GOFamily/assets/js/52.d3f06485.js"><link rel="prefetch" href="/GOFamily/assets/js/53.60bb95e9.js"><link rel="prefetch" href="/GOFamily/assets/js/54.ee26f0f5.js"><link rel="prefetch" href="/GOFamily/assets/js/55.7b5dc58d.js"><link rel="prefetch" href="/GOFamily/assets/js/56.e3024720.js"><link rel="prefetch" href="/GOFamily/assets/js/57.74cebe2c.js"><link rel="prefetch" href="/GOFamily/assets/js/58.2eea170e.js"><link rel="prefetch" href="/GOFamily/assets/js/59.a733d97b.js"><link rel="prefetch" href="/GOFamily/assets/js/6.f4af1c68.js"><link rel="prefetch" href="/GOFamily/assets/js/60.31fce32e.js"><link rel="prefetch" href="/GOFamily/assets/js/61.025df443.js"><link rel="prefetch" href="/GOFamily/assets/js/62.dfeb9d10.js"><link rel="prefetch" href="/GOFamily/assets/js/63.088bb315.js"><link rel="prefetch" href="/GOFamily/assets/js/64.7503aa28.js"><link rel="prefetch" href="/GOFamily/assets/js/65.9e82002d.js"><link rel="prefetch" href="/GOFamily/assets/js/66.fd22a77b.js"><link rel="prefetch" href="/GOFamily/assets/js/67.613f77e3.js"><link rel="prefetch" href="/GOFamily/assets/js/68.42cf41b2.js"><link rel="prefetch" href="/GOFamily/assets/js/69.a1051de8.js"><link rel="prefetch" href="/GOFamily/assets/js/7.5c52a687.js"><link rel="prefetch" href="/GOFamily/assets/js/70.8c3a3873.js"><link rel="prefetch" href="/GOFamily/assets/js/71.57746954.js"><link rel="prefetch" href="/GOFamily/assets/js/72.5afe8bc8.js"><link rel="prefetch" href="/GOFamily/assets/js/73.03d8974c.js"><link rel="prefetch" href="/GOFamily/assets/js/74.4f1eeb3c.js"><link rel="prefetch" href="/GOFamily/assets/js/75.d44fc2e7.js"><link rel="prefetch" href="/GOFamily/assets/js/76.f53bf284.js"><link rel="prefetch" href="/GOFamily/assets/js/77.bad2588a.js"><link rel="prefetch" href="/GOFamily/assets/js/78.2ee31447.js"><link rel="prefetch" href="/GOFamily/assets/js/79.f5c3f20d.js"><link rel="prefetch" href="/GOFamily/assets/js/8.419c1695.js"><link rel="prefetch" href="/GOFamily/assets/js/80.5aa44af4.js"><link rel="prefetch" href="/GOFamily/assets/js/81.33455a03.js"><link rel="prefetch" href="/GOFamily/assets/js/82.9f2284bd.js"><link rel="prefetch" href="/GOFamily/assets/js/83.5dc60988.js"><link rel="prefetch" href="/GOFamily/assets/js/84.b93653e7.js"><link rel="prefetch" href="/GOFamily/assets/js/85.17171820.js"><link rel="prefetch" href="/GOFamily/assets/js/86.411754fa.js"><link rel="prefetch" href="/GOFamily/assets/js/87.94cb9c84.js"><link rel="prefetch" href="/GOFamily/assets/js/88.bf9b9181.js"><link rel="prefetch" href="/GOFamily/assets/js/89.30daa2d3.js"><link rel="prefetch" href="/GOFamily/assets/js/9.0852bf61.js"><link rel="prefetch" href="/GOFamily/assets/js/90.86c77607.js"><link rel="prefetch" href="/GOFamily/assets/js/91.77196b7c.js"><link rel="prefetch" href="/GOFamily/assets/js/92.52bff9af.js"><link rel="prefetch" href="/GOFamily/assets/js/93.2ad1e17b.js"><link rel="prefetch" href="/GOFamily/assets/js/94.cb498e95.js"><link rel="prefetch" href="/GOFamily/assets/js/95.3eff79bb.js"><link rel="prefetch" href="/GOFamily/assets/js/96.01bee062.js"><link rel="prefetch" href="/GOFamily/assets/js/97.46e63812.js"><link rel="prefetch" href="/GOFamily/assets/js/98.843925cf.js"><link rel="prefetch" href="/GOFamily/assets/js/99.d9206bf1.js">
    <link rel="stylesheet" href="/GOFamily/assets/css/0.styles.93ee3edc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/GOFamily/" class="home-link router-link-active"><img src="https://avatars.githubusercontent.com/u/42873232" alt="GOFamily - go ç¨‹åºå‘˜å®å…¸" class="logo"> <span class="site-name can-hide">GOFamily - go ç¨‹åºå‘˜å®å…¸</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/GOFamily/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">ç³»åˆ—æ•™ç¨‹</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">ç³»åˆ—æ•™ç¨‹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily ã€goè¯­è¨€æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  ã€åŸºç¡€408çŸ¥è¯†æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  ã€ç³»ç»Ÿè®¾è®¡æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  ã€å·¥å…·æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  ã€ç»™ç¨‹åºå‘˜å†™çš„ä¹¦ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ä½œè€…
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/GOFamily" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/GOFamily/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">ç³»åˆ—æ•™ç¨‹</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">ç³»åˆ—æ•™ç¨‹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily ã€goè¯­è¨€æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  ã€åŸºç¡€408çŸ¥è¯†æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  ã€ç³»ç»Ÿè®¾è®¡æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  ã€å·¥å…·æ•™ç¨‹ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  ã€ç»™ç¨‹åºå‘˜å†™çš„ä¹¦ã€‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ä½œè€…
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/GOFamily" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#é”™è¯¯å¤„ç†çš„åŸºæœ¬è®¤è¯†" class="sidebar-link">é”™è¯¯å¤„ç†çš„åŸºæœ¬è®¤è¯†</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#error-çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ" class="sidebar-link">Error çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#è‡ªå®šä¹‰-error" class="sidebar-link">è‡ªå®šä¹‰ error</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#errors-is" class="sidebar-link">errors.Is()</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#errors-as" class="sidebar-link">errors.As()</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#errors-join" class="sidebar-link">errors.Join()</a></li></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#å½“é”™è¯¯å¤„ç†é‡åˆ°äº†-defer" class="sidebar-link">å½“é”™è¯¯å¤„ç†é‡åˆ°äº† defer</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#é”™è¯¯å¤„ç†å®æˆ˜çš„äº”ç§æ–¹å¼" class="sidebar-link">é”™è¯¯å¤„ç†å®æˆ˜çš„äº”ç§æ–¹å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ç»å…¸çš„é”™è¯¯å¤„ç†æ–¹å¼" class="sidebar-link">ç»å…¸çš„é”™è¯¯å¤„ç†æ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#å±è”½è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†" class="sidebar-link">å±è”½è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#åˆ†å±‚æ¶æ„ä¸­çš„é”™è¯¯å¤„ç†æ–¹æ³•" class="sidebar-link">åˆ†å±‚æ¶æ„ä¸­çš„é”™è¯¯å¤„ç†æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#pkg-errors" class="sidebar-link">pkg/errors</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#errgroup-çš„ä½¿ç”¨æŠ€å·§" class="sidebar-link">errgroup çš„ä½¿ç”¨æŠ€å·§</a></li></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#é”™è¯¯å¤„ç†ç›¸å…³æŠ€å·§" class="sidebar-link">é”™è¯¯å¤„ç†ç›¸å…³æŠ€å·§</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä½¿ç”¨-errors-new-æ—¶è¦å†™æ¸…æ¥šåŒ…å" class="sidebar-link">ä½¿ç”¨ errors.New() æ—¶è¦å†™æ¸…æ¥šåŒ…å</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä½¿ç”¨-error-å¤„ç†ä¸€èˆ¬é”™è¯¯-ä½¿ç”¨-panic-å¤„ç†ä¸¥é‡é”™è¯¯-å¼‚å¸¸" class="sidebar-link">ä½¿ç”¨ error å¤„ç†ä¸€èˆ¬é”™è¯¯ï¼Œä½¿ç”¨ panic å¤„ç†ä¸¥é‡é”™è¯¯ (å¼‚å¸¸)</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#åŸºç¡€åº“-åº”è¯¥é¿å…ä½¿ç”¨-error-types" class="sidebar-link">åŸºç¡€åº“ï¼Œåº”è¯¥é¿å…ä½¿ç”¨ error types</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä¼˜åŒ–ä¸å¿…è¦çš„ä»£ç è®©ç¨‹åºå˜å¾—æ›´ç®€æ´" class="sidebar-link">ä¼˜åŒ–ä¸å¿…è¦çš„ä»£ç è®©ç¨‹åºå˜å¾—æ›´ç®€æ´</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#é”™è¯¯åº”è¯¥åªå¤„ç†ä¸€æ¬¡" class="sidebar-link">é”™è¯¯åº”è¯¥åªå¤„ç†ä¸€æ¬¡</a></li></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä¸šåŠ¡-code-ç çš„è®¾ç½®" class="sidebar-link">ä¸šåŠ¡ code ç çš„è®¾ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä¸€å¾‹è¿”å›-http-status-200-å…·ä½“-code-ç å•ç‹¬è®¾ç½®" class="sidebar-link">ä¸€å¾‹è¿”å› http status 200ï¼Œå…·ä½“ code ç å•ç‹¬è®¾ç½®</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä½¿ç”¨åˆé€‚çš„-http-status-code-ç®€å•çš„ä¿¡æ¯ä»¥åŠä¸šåŠ¡é”™è¯¯ä»£ç " class="sidebar-link">ä½¿ç”¨åˆé€‚çš„ http status code + ç®€å•çš„ä¿¡æ¯ä»¥åŠä¸šåŠ¡é”™è¯¯ä»£ç </a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä½¿ç”¨åˆé€‚çš„-http-status-code-éå¸¸è¯¦ç»†çš„ä¸šåŠ¡é”™è¯¯ä»£ç ä»¥åŠä¿¡æ¯" class="sidebar-link">ä½¿ç”¨åˆé€‚çš„ http status code + éå¸¸è¯¦ç»†çš„ä¸šåŠ¡é”™è¯¯ä»£ç ä»¥åŠä¿¡æ¯</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ä¸šåŠ¡-code-ç çš„å…·ä½“è®¾è®¡" class="sidebar-link">ä¸šåŠ¡ code ç çš„å…·ä½“è®¾è®¡</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#å¦‚ä½•è®¾ç½®-http-status-code" class="sidebar-link">å¦‚ä½•è®¾ç½® http status code</a></li></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#è®¾è®¡ä¸€ä¸ªç”Ÿäº§çº§çš„é”™è¯¯åŒ…" class="sidebar-link">è®¾è®¡ä¸€ä¸ªç”Ÿäº§çº§çš„é”™è¯¯åŒ…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#ç”Ÿäº§çº§çš„é”™è¯¯åŒ…éœ€è¦çš„åŠŸèƒ½" class="sidebar-link">ç”Ÿäº§çº§çš„é”™è¯¯åŒ…éœ€è¦çš„åŠŸèƒ½</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#å…·ä½“å®ç°" class="sidebar-link">å…·ä½“å®ç°</a></li></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#issues" class="sidebar-link">issues</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</h1> <h2 id="é”™è¯¯å¤„ç†çš„åŸºæœ¬è®¤è¯†">é”™è¯¯å¤„ç†çš„åŸºæœ¬è®¤è¯†</h2> <p>åœ¨ go è¯­è¨€ä¸­ï¼Œæ²¡æœ‰ä¼ ç»Ÿç¼–ç¨‹è¯­è¨€çš„ <code>try - catch</code> æ“ä½œï¼Œgo è¯­è¨€ä¸­ä¸€åˆ‡é”™è¯¯éƒ½éœ€è¦æ˜¾å¼å¤„ç†ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> err
<span class="token punctuation">}</span>
</code></pre></div><p>é€šå¸¸ï¼Œæˆ‘ä»¬è§„å®šå‡½æ•°è¿”å›çš„æœ€åä¸€ä¸ªæ•°æ®æ˜¯é”™è¯¯æ¥å£ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span>v <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> v <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;é”™è¯¯x&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬ç›´æ¥è¿”å›ä¸€ä¸ª err æ˜¯ä¸€ç§ç®€å•çš„åšæ³•ï¼Œå¦‚æœé”™è¯¯æ¯”è¾ƒåˆçº§ä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼Œä½†æ˜¯å¦‚æœæƒ³è¦å¸¦æœ‰æ›´ç²¾ç¡®çš„æç¤ºä¿¡æ¯ï¼Œå¯ä»¥åœ¨è¿”å›çš„æ—¶å€™ wrap ä¸€å±‚ä¿¡æ¯ï¼š</p> <p>å°±ä»¥ä¸Šæ–‡çš„è¯»å–æ•°æ®ä¸ºä¾‹</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;åœ¨è¯»å–æ•°æ®çš„æ—¶å€™å‘ç”Ÿäº†é”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯ï¼š%w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>wrap ä¸€å±‚ä¿¡æ¯ï¼Œå¯¹äºé”™è¯¯çš„å®šä½æ›´åŠ é«˜æ•ˆ</p> <h2 id="error-çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ">Error çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2> <p>é”™è¯¯å¤„ç†çš„æ ¸å¿ƒå°±æ˜¯ä¸‹é¢è¿™ä¸€ä¸ª error çš„æ¥å£</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> <span class="token builtin">error</span> <span class="token keyword">interface</span><span class="token punctuation">{</span>
	<span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰€ä»¥åªè¦æˆ‘ä»¬çš„è‡ªå»ºç±»å‹å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥ä½¿ç”¨å¾ˆå¤šçš„é”™è¯¯å¤„ç†çš„æ–¹æ³•ã€‚</p> <h3 id="è‡ªå®šä¹‰-error">è‡ªå®šä¹‰ error</h3> <p>æˆ‘ä»¬ä½¿ç”¨ errors.New() çš„æ—¶å€™å…¶å®å°±æ˜¯è¿”å›äº†ä¸€ä¸ª go è‡ªå»ºçš„ï¼Œå«åš errorString çš„å®ç°äº† error æ¥å£çš„ç»“æ„ä½“ã€‚
è¿™å°±æ˜¯è‡ªå»º error çš„æ–¹æ³•</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	e <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// (0x47fd48,0xc00003e730)</span>
</code></pre></div><p>ä¸ºäº†é˜²æ­¢åœ¨æ¯”è¾ƒé”™è¯¯çš„æ—¶å€™å‘ç”Ÿé”™è¯¯ä¸€è‡´çš„æƒ…å†µï¼Œæ‰€ä»¥è‡ªå»º errorï¼Œè¿”å›çš„å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚</p> <blockquote><p>ä¸‹æ–‡ä¼šæç”¨ä»€ä¹ˆæ–¹æ³•è¿›è¡Œæ¯”è¾ƒ errï¼Œå®é™…ä¸Šå°±æ˜¯ â€œä¸¤ä¸ªæ¥å£ç±»å‹æ˜¯å¦ç›¸ç­‰ --- ç±»å‹ä¸€è‡´ï¼Œå€¼ä¸€è‡´â€ï¼Œå¦‚æœè¿”å›çš„å€¼æ˜¯æŒ‡é’ˆï¼Œé‚£ä¹ˆå€¼è‚¯å®šå°±ä¸å¯èƒ½ä¸€æ ·äº†ã€‚</p></blockquote> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// go æºä»£ç </span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>errorString<span class="token punctuation">{</span>s<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“æˆ‘ä»¬ä½¿ç”¨ fmt.Errorf() çš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿæ˜¯ä½¿ç”¨çš„ä¸Šè¿°æ–¹æ³•ã€‚</p> <p>ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†å ä½ç¬¦ <code>%w</code> æ—¶ï¼Œå°†ä¸ä¼šä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨äº† wrapErrorï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> wrapError <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	msg <span class="token builtin">string</span>
	err <span class="token builtin">error</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span><span class="token punctuation">(</span>e <span class="token operator">*</span>wrapError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">string</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> e<span class="token punctuation">.</span>msg
<span class="token punctuation">}</span>
<span class="token keyword">func</span><span class="token punctuation">(</span>e <span class="token operator">*</span>wrapError<span class="token punctuation">)</span> <span class="token function">Unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> e<span class="token punctuation">.</span>err
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨è¿™ç§æ–¹å¼ä¸»è¦æ˜¯ä¸ºäº†é”™è¯¯é“¾ï¼Œé‚£å°±è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨é”™è¯¯é“¾çš„ç›¸å…³æ“ä½œã€‚</p> <h3 id="errors-is">errors.Is()</h3> <p>ä¸Šæ–‡æˆ‘ä»¬è¯´åˆ°ï¼Œé”™è¯¯å¯ä»¥ä½¿ç”¨ wrap çš„æ–¹å¼è¿›è¡Œå°è£…ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³åˆ¤æ–­å°è£…çš„è¿™ä¹ˆå¤šå±‚çš„é”™è¯¯ä¸­ï¼Œæœ‰æ²¡æœ‰å“ªä¸€å±‚é”™è¯¯ç­‰äºæˆ‘ä»¬è¦çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	err <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;err is now&quot;</span><span class="token punctuation">)</span>
	err1 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;err1:%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	err2 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;err1:%w&quot;</span><span class="token punctuation">,</span>err1<span class="token punctuation">)</span>
	<span class="token keyword">if</span> errors<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>err2<span class="token punctuation">,</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¯ä¸€ä¸ªé”™è¯¯&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="errors-as">errors.As()</h3> <p>è¿™ä¸ªæ–¹æ³•è·Ÿä¸Šæ–‡çš„ Is() ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒåˆ¤æ–­çš„æ˜¯ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> errS <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	a <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>errS<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> t<span class="token punctuation">.</span>a
<span class="token punctuation">}</span>

err <span class="token operator">:=</span> <span class="token operator">&amp;</span>errS<span class="token punctuation">{</span><span class="token string">&quot;typical error&quot;</span><span class="token punctuation">}</span>
err1 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;wrap err: %w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
err2 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;wrap err1: %w&quot;</span><span class="token punctuation">,</span> err1<span class="token punctuation">)</span>

<span class="token keyword">var</span> e <span class="token operator">*</span>errS
<span class="token comment">// è¿™é‡Œçš„ target å¿…é¡»ä½¿ç”¨æŒ‡é’ˆ</span>
<span class="token keyword">if</span> <span class="token operator">!</span>errors<span class="token punctuation">.</span><span class="token function">As</span><span class="token punctuation">(</span>err2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;TypicalErr is not on the chain of err2&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;TypicalErr is on the chain of err2&quot;</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span>err <span class="token operator">==</span> e<span class="token punctuation">)</span>
</code></pre></div><h3 id="errors-join">errors.Join()</h3> <p>è¿™ä¸ªæ–¹æ³•æ˜¯å°†å‡ ä¸ªé”™è¯¯ç»“åˆåœ¨ä¸€èµ·çš„æ–¹æ³•ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code>	err1 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;err1:%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	err2 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;err1:%w&quot;</span><span class="token punctuation">,</span>err1<span class="token punctuation">)</span>
	err <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>err1<span class="token punctuation">,</span>err2<span class="token punctuation">)</span>
</code></pre></div><h2 id="å½“é”™è¯¯å¤„ç†é‡åˆ°äº†-defer">å½“é”™è¯¯å¤„ç†é‡åˆ°äº† defer</h2> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> xx <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">0</span> <span class="token punctuation">,</span>err
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token builtin">close</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ®µä¼ªä»£ç çš„æ„æ€æ˜¯è¯´ï¼Œå½“æœ‰æ¡ä»¶ä¹‹åï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œä½†æ˜¯ defer çš„å†…å®¹å‘ç”Ÿåœ¨è¿™ä¸ª err è¢«å›ºå®šä¹‹åï¼Œæ‰€ä»¥ defer ä¸­å¦‚æœå†æœ‰é”™è¯¯å°†ä¸ä¼šè¢«å¤„ç†ã€‚</p> <p>é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆæ›´æ”¹å‘¢ï¼Ÿ</p> <p>æˆ‘æƒ³ä½ ä¸€å®šæƒ³åˆ°äº†å‰æ–‡æˆ‘ä»¬è¯´è¿‡ï¼Œä½¿ç”¨å¸¦æœ‰å˜é‡çš„è¿”å›å€¼æ˜¯å¯ä»¥å°† defer çš„å€¼è¿›è¡Œè¿”å›çš„ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span> i <span class="token builtin">int</span><span class="token punctuation">,</span> e <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> xx <span class="token punctuation">{</span>
			e <span class="token operator">=</span> xx
			i <span class="token operator">=</span> xx
		<span class="token keyword">return</span> 
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token builtin">close</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é‚£ä¹ˆè¿™ç§å†™æ³•ï¼Œdefer ä¸­å¦‚æœå‘ç”Ÿäº†é”™è¯¯å°±ä¼šè¦†ç›–æ‰äº†ç¨‹åºæ‰§è¡Œä¸­çš„ errï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå³ä½¿å®ƒèƒ½ç…§é¡¾åˆ°äº† defer ä¸­çš„é”™è¯¯å¤„ç†ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥å°†é”™è¯¯å¤„ç†éƒ½æ”¾åœ¨ defer ä¸­å¤„ç†å°±å¯ä»¥äº†</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span> i <span class="token builtin">int</span><span class="token punctuation">,</span> e <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> xx <span class="token punctuation">{</span>
		i <span class="token operator">=</span> xx
		e <span class="token operator">=</span> xx
		<span class="token keyword">return</span> 
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		e1 <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span>  e1 <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
					<span class="token function">log</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span> 
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> 
		<span class="token punctuation">}</span>
		err <span class="token operator">=</span> e1
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·ï¼Œä¸¤ç§é”™è¯¯éƒ½èƒ½å¤„ç†åˆ°äº†</p> <h2 id="é”™è¯¯å¤„ç†å®æˆ˜çš„äº”ç§æ–¹å¼">é”™è¯¯å¤„ç†å®æˆ˜çš„äº”ç§æ–¹å¼</h2> <h3 id="ç»å…¸çš„é”™è¯¯å¤„ç†æ–¹å¼">ç»å…¸çš„é”™è¯¯å¤„ç†æ–¹å¼</h3> <p>æ¯ä¸€ä¸ªæ­¥éª¤åˆ†åˆ«ç›´æ¥å¤„ç†é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> age <span class="token keyword">interface</span><span class="token punctuation">{</span>
	<span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span>
	<span class="token function">putAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span>
	<span class="token function">allAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">D</span><span class="token punctuation">(</span>ag age<span class="token punctuation">)</span><span class="token builtin">error</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> ag<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> ag<span class="token punctuation">.</span><span class="token function">putAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> ag<span class="token punctuation">.</span><span class="token function">allAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	  <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å±è”½è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†">å±è”½è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†</h3> <p>å°†é”™è¯¯æ”¾ç½®åœ¨å¯¹è±¡çš„å†…éƒ¨è¿›è¡Œå¤„ç†ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> FileCopier <span class="token keyword">struct</span><span class="token punctuation">{</span>
	w <span class="token operator">*</span>os<span class="token punctuation">.</span>File
	r <span class="token operator">*</span>os<span class="token punctuation">.</span>File
	err <span class="token builtin">error</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>FileCopier<span class="token punctuation">)</span><span class="token function">open</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span> <span class="token operator">*</span>os<span class="token punctuation">.</span>File<span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> f<span class="token punctuation">.</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span>err
	<span class="token punctuation">}</span>

	h<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		f<span class="token punctuation">.</span>err <span class="token operator">=</span> err
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> h<span class="token punctuation">,</span><span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span><span class="token punctuation">(</span>f <span class="token operator">*</span>FileCopier<span class="token punctuation">)</span><span class="token function">OpenSrc</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> f<span class="token punctuation">.</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	f<span class="token punctuation">.</span>r<span class="token punctuation">,</span>f<span class="token punctuation">.</span>err <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
	<span class="token keyword">return</span> 
<span class="token punctuation">}</span>
<span class="token keyword">func</span><span class="token punctuation">(</span>f <span class="token operator">*</span>FileCopier<span class="token punctuation">)</span> <span class="token function">CopyFile</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> f<span class="token punctuation">.</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> f<span class="token punctuation">.</span>err
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span> f<span class="token punctuation">.</span>r <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			f<span class="token punctuation">.</span>r<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> f<span class="token punctuation">.</span>w<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			f<span class="token punctuation">.</span>w<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> f<span class="token punctuation">.</span>err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> f<span class="token punctuation">.</span>w <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				os<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	
	f<span class="token punctuation">.</span><span class="token function">opensrc</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span>
	f<span class="token punctuation">.</span><span class="token function">createDst</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span>
	<span class="token keyword">return</span> f<span class="token punctuation">.</span>err
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ®µä»£ç å¹¶ä¸æ˜¯ç‰¹åˆ«å®Œæ•´ï¼Œä½†æ˜¯ä»ä¸­æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç†è§£è¿™ç§å°†é”™è¯¯æ”¾åœ¨å¯¹è±¡ä¸­çš„å†™æ³•çš„æŠ€å·§ã€‚</p> <p>é¦–å…ˆï¼Œé”™è¯¯ç›´æ¥æ”¾ç½®åœ¨å¯¹è±¡è‡ªèº«ï¼Œåœ¨æ–¹æ³•ä¸­é¦–å…ˆå»è°ƒç”¨è¿™ä¸ªå­—æ®µæ¥çœ‹æ˜¯å¦æ‹¥æœ‰é”™è¯¯ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥é€€å‡ºå³å¯</p> <p>å¦‚æœæ²¡æœ‰é”™è¯¯ç»§ç»­å¾€ä¸‹èµ°ï¼Œå¦‚æœæœ¬æ¬¡æ–¹æ³•å‘ç”Ÿé”™è¯¯å°±ç»§ç»­å°†è¿™ä¸ªé”™è¯¯èµ‹å€¼ç»™è¿™ä¸ªå­—æ®µï¼Œ</p> <p>å½“æœ€åå¤„ç†çš„æ–¹æ³•æ—¶ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯ copyfile æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ defer ä¸­è¦å¯¹äºå„ä¸ªå­æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼Œåˆ°åº•æ˜¯å“ªä¸ªæ–¹æ³•æœ‰é”™è¯¯ï¼Œç„¶åé€ä¸€è¿›è¡Œåˆ¤å®šã€‚ç›¸å½“äºå¤„ç†é”™è¯¯çš„é€»è¾‘é›†ä¸­æ”¾ç½®åˆ°äº†æœ€åä¸€ä¸ªå‡½æ•°è¿›è¡Œæ‰§è¡Œäº†ã€‚</p> <p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†é”™è¯¯æ”¾ç½®åœ¨å¯¹è±¡æœ¬èº«çš„æ—¶å€™ï¼Œé€šå¸¸åº”è¯¥ä¸ºé¡ºåºè°ƒç”¨çš„æ–¹æ³•ï¼Œä¸€æ—¦å‰è€…å‡ºç°é”™è¯¯ï¼Œåè€…å³å¯é€€å‡º</p> <p>å¦‚æœä¸æ˜¯é¡ºåºçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œé‚£ä¹ˆæœ‰äº›çš„é”™è¯¯å°±å¯èƒ½è¢«æ¹®æ²¡ï¼Œå¯¼è‡´é”™è¯¯æ— æ³•è¢«æ„ŸçŸ¥ã€‚</p> <h3 id="åˆ†å±‚æ¶æ„ä¸­çš„é”™è¯¯å¤„ç†æ–¹æ³•">åˆ†å±‚æ¶æ„ä¸­çš„é”™è¯¯å¤„ç†æ–¹æ³•</h3> <p>å¸¸è§çš„åˆ†å±‚æ¶æ„</p> <ul><li>controller æ§åˆ¶å±‚</li> <li>service æœåŠ¡å±‚</li> <li>dao æ•°æ®è®¿é—®å±‚</li></ul> <p>dao å±‚ç”Ÿäº§é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>service è¿½åŠ é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code>err <span class="token operator">:=</span> a<span class="token punctuation">.</span>Dao<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;getname err: %w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>controller æ‰“å°é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	<span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="pkg-errors">pkg/errors</h3> <p>å¦‚æœæ„Ÿè§‰æ ‡å‡†åº“æä¾›çš„é”™è¯¯å¤„ç†ä¸å¤Ÿä¸°å¯Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ github.com/pkg/errors æ¥å¤„ç†é”™è¯¯</p> <p>æ­¤åŒ…å¸¸ç”¨çš„æ–¹æ³•æœ‰</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// ç”Ÿæˆæ–°çš„é”™è¯¯ï¼ŒåŒæ ·ä¼šé™„åŠ å †æ ˆä¿¡æ¯</span>
<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span>
<span class="token comment">// åªé™„åŠ æ–°çš„æ¶ˆæ¯</span>
<span class="token keyword">func</span> <span class="token function">WithMessage</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">,</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token comment">// åªé™„åŠ å †æ ˆä¿¡æ¯</span>
<span class="token keyword">func</span> <span class="token function">WithStack</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token builtin">error</span>
<span class="token comment">// é™„åŠ ä¿¡æ¯ + å †æ ˆä¿¡æ¯(å°±æ˜¯ä¸€å¤§å †çš„å„ç§æ–‡ä»¶çš„å †æ ˆè°ƒç”¨è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯)</span>
<span class="token keyword">func</span> <span class="token function">Wrapf</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">,</span>format <span class="token builtin">string</span><span class="token punctuation">,</span>args<span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token comment">// è·å–æœ€æ ¹æœ¬çš„é”™è¯¯ï¼ˆé”™è¯¯é“¾çš„æœ€åº•å±‚ï¼‰</span>
<span class="token keyword">func</span> <span class="token function">Cause</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
</code></pre></div><p>ä¾‹å¦‚ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	err <span class="token operator">:=</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token comment">// %+v æ˜¯ pkg/errors åŒ…æä¾›çš„æ ¼å¼åŒ–è¾“å‡ºæ ¼å¼ï¼Œè¾“å‡ºé”™è¯¯å †æ ˆ</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%+v&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span><span class="token string">&quot;open error&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ä½¿ç”¨è¿™ä¸ª pkg/errors åŒ…çš„æ—¶å€™è¦æ³¨æ„ä¸€ä»¶äº‹ï¼Œå› ä¸º wrap å¯ä»¥åŒ…è£…å †æ ˆå‘ä¸Šè¾“å‡ºï¼Œå¦‚æœä½ è°ƒç”¨çš„ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨äº† wrapï¼Œä½ å†æ¬¡ä½¿ç”¨ wrapï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸¤å †ç›¸åŒçš„å †æ ˆä¿¡æ¯ï¼Œè¿™é€ æˆäº†æå¤§çš„å†—ä½™ã€‚</p> <p>æ‰€ä»¥ï¼Œ</p> <ul><li>åœ¨æä¾›å¤šäººä½¿ç”¨çš„ä¸‰æ–¹åº“çš„æ—¶å€™ä¸è¦ä½¿ç”¨ wrapï¼Œåªæœ‰é€»è¾‘ä»£ç çš„æ—¶å€™ä½¿ç”¨ wrap çš„åŠŸèƒ½</li> <li>é‡åˆ°ä¸€ä¸ªé”™è¯¯ä¸æ‰“ç®—å¤„ç†ï¼Œé‚£ä¹ˆè¦å¸¦ä¸Šè¶³å¤Ÿå¤šçš„ä¿¡æ¯å†å‘ä¸ŠæŠ›å‡º</li> <li>ä¸€æ—¦é”™è¯¯å¤„ç†å®Œæˆä¹‹åå°±æ²¡æœ‰é”™è¯¯äº†ï¼Œä¸å†éœ€è¦æŠŠé”™è¯¯ç»§ç»­ç½‘ä¸ŠæŠ›ï¼Œè¿”å› nil å³å¯</li></ul> <p>æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ pkg/errors åŒ…å°†ä¸Šé¢çš„åˆ†å±‚å†™æ³•åšä¸€ä¸ªæ›´å®Œå–„çš„æ”¹è¿›ï¼š</p> <p>dao å±‚ç”Ÿäº§é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// a</span>
<span class="token keyword">func</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token comment">// è¿”å›æ­¤å¤„çš„é”™è¯¯å †æ ˆ</span>
		<span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span><span class="token string">&quot;error:&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

</code></pre></div><p>service è¿½åŠ é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code>err <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token comment">// ä¸è¿”å›å †æ ˆäº†ï¼Œä»…ä»…æ·»åŠ é”™è¯¯</span>
		<span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span><span class="token string">&quot;getName error&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>controller æ‰“å°é”™è¯¯</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ·»åŠ æ—¥å¿—</span>
	<span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="errgroup-çš„ä½¿ç”¨æŠ€å·§">errgroup çš„ä½¿ç”¨æŠ€å·§</h3> <p>errgroup çš„ä½¿ç”¨æ–¹æ³•æ˜¯ golang.org/x/sync/errgroup</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;context&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;golang.org/x/sync/errgroup&quot;</span>
<span class="token punctuation">)</span>


<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	g<span class="token punctuation">,</span> ctx <span class="token operator">:=</span> errgroup<span class="token punctuation">.</span><span class="token function">WithContext</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// å¯åŠ¨ä¸€ä¸ª goroutineå»å¤„ç†é”™è¯¯</span>
	g<span class="token punctuation">.</span><span class="token function">Go</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;error1&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	g<span class="token punctuation">.</span><span class="token function">Go</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;error2&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token comment">// ç±»ä¼¼ waitgroup çš„ wait æ–¹æ³•</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> g<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é”™è¯¯å¤„ç†ç›¸å…³æŠ€å·§">é”™è¯¯å¤„ç†ç›¸å…³æŠ€å·§</h2> <p>è¿™é‡Œä¼šä»‹ç»åœ¨å®æˆ˜è¿‡ç¨‹ä¸­ç”¨åˆ°çš„è¯¸å¤šæŠ€å·§</p> <h3 id="ä½¿ç”¨-errors-new-æ—¶è¦å†™æ¸…æ¥šåŒ…å">ä½¿ç”¨ errors.New() æ—¶è¦å†™æ¸…æ¥šåŒ…å</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> age

ErrMyAge <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;age: ErrMyAge is error&quot;</span><span class="token punctuation">)</span>
ErrMyAddress <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;age: ErrMyAddress is error&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ä½¿ç”¨-error-å¤„ç†ä¸€èˆ¬é”™è¯¯-ä½¿ç”¨-panic-å¤„ç†ä¸¥é‡é”™è¯¯-å¼‚å¸¸">ä½¿ç”¨ error å¤„ç†ä¸€èˆ¬é”™è¯¯ï¼Œä½¿ç”¨ panic å¤„ç†ä¸¥é‡é”™è¯¯ (å¼‚å¸¸)</h3> <p>ä½¿ç”¨è¿™ç§æ¨¡å‹å°±é¿å…äº†ç±»ä¼¼ Java é‚£ç§æ‰€æœ‰é”™è¯¯éƒ½ä¸€æ ·çš„è¡Œä¸ºï¼ŒJava çš„ä½¿ç”¨ try-catch çš„æ–¹å¼å¯¼è‡´ä»»ä½•é”™è¯¯éƒ½æ˜¯ä¸€ä¸ªæ–¹å¼å»å¤„ç†ï¼Œéå¸¸æœ‰å¯èƒ½è®©ç¨‹åºå‘˜å¿½ç•¥é”™è¯¯çš„å¤„ç†</p> <p>ç„¶è€Œ go ä¸åŒï¼Œ<strong>é”™è¯¯</strong>ä½¿ç”¨ errorï¼Œ<strong>å¼‚å¸¸</strong>ä½¿ç”¨ panic çš„æ–¹å¼å»å¤„ç†ã€‚</p> <ul><li>é”™è¯¯ï¼šerror</li> <li>å¼‚å¸¸ï¼španic</li></ul> <p>å‡è®¾æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨äº† panicï¼Œé€šå¸¸æ¥è¯´ï¼Œä¸ºäº†ä»£ç çš„å¥å£®æ€§è¿˜æ˜¯ä¼šä½¿ç”¨ defer å‡½æ•°å»è¿è¡Œä¸€ä¸ª recover() çš„ï¼Œç¨‹åºçš„å­˜æ´»æ¯”å•¥éƒ½é‡è¦ã€‚</p> <h3 id="åŸºç¡€åº“-åº”è¯¥é¿å…ä½¿ç”¨-error-types">åŸºç¡€åº“ï¼Œåº”è¯¥é¿å…ä½¿ç”¨ error types</h3> <p>å› ä¸ºè¿™ç§å†™æ³•å®¹æ˜“é€ æˆä»£ç çš„è€¦åˆï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬å†™çš„åŸºç¡€åº“ä¸­ï¼Œéå¸¸å®¹æ˜“é€ æˆæ”¹åŠ¨ä»£ç æ¥å¼•å…¥çš„ä¸å¥å£®æ€§ã€‚</p> <p>ä½¿ç”¨è‡ªå®šä¹‰çš„ error type</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// ä¸ºäº†é¢å¤–å¢åŠ æ›´å¤šçš„é”™è¯¯ä¿¡æ¯ï¼Œå­—æ®µéœ€å¤§å†™</span>
<span class="token keyword">type</span> ErrMyAge <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	EV <span class="token builtin">string</span>
	MErr <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>ErrMyAge<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;age: %s&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>EV<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	err <span class="token operator">:=</span> <span class="token operator">&amp;</span>ErrMyAge<span class="token punctuation">{</span><span class="token string">&quot;err age is hi&quot;</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ errors.New() å“¨å…µé”™è¯¯æ¨¡å¼ï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// æˆ‘æ–¹ä»£ç </span>
ErrAge <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;age: ErrAge is error&quot;</span><span class="token punctuation">)</span>
ErrAddress <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;age: ErrAddress is error&quot;</span><span class="token punctuation">)</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">// ä½¿ç”¨è€…</span>

<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">&quot;github.com/shgopher/age&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// å¸¦æ¥äº†è€¦åˆ</span>
		<span class="token keyword">if</span> errors<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> age<span class="token punctuation">.</span>ErrAge<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// å¤„ç†</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®é™…ä¸Šä»–ä»¬éƒ½æ˜¯ error typesï¼Œåªä¸è¿‡å‰è€…æ¯”åè€…å¢åŠ äº†å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç›¸åŒç‚¹æ˜¯ï¼Œä»–ä»¬éƒ½é€ æˆäº†è€¦åˆ</p> <p>å¦‚æœåˆ«äººä½¿ç”¨äº†è¿™ä¸ªåŸºç¡€åº“ï¼Œé‚£ä¹ˆåŠ¿å¿…è¿™äº›é”™è¯¯å°±ä¼šè·Ÿä½¿ç”¨è€…çš„ä»£ç è€¦åˆï¼Œæˆ‘ä»¬æ”¹åŠ¨äº†ä»£ç ï¼Œç¬¬ä¸‰æ–¹çš„ä»£ç å°±ä¼šå› æ­¤å—åˆ°å½±å“ã€‚</p> <p>å› æ­¤ï¼Œåœ¨å¯¹å¤–æš´éœ²çš„åŸºç¡€åŒ…ä¸­ï¼Œæˆ‘ä»¬åº”å°½é‡å‡å°‘å®šä¹‰å“¨å…µé”™è¯¯ (ä¸Šè¿°å®šä¹‰æ–¹æ³•è¢«ç§°ä¹‹ä¸ºå“¨å…µæ¨¡å¼çš„é”™è¯¯)</p> <p>ä¸Šè¿°æä¾›çš„å“¨å…µæ¨¡å¼æ˜¯é€æ˜çš„é”™è¯¯å¯¼å‡ºæœºåˆ¶ï¼Œæ‰€ä»¥å®¹æ˜“é€ æˆè€¦åˆ</p> <p>æˆ‘ä»¬å¯ä»¥æä¾›ä¸é€æ˜çš„æœºåˆ¶ï¼Œä¸å¯¼å‡ºé€æ˜çš„é”™è¯¯ç±»å‹ï¼Œä»…ä»…è®©ç”¨æˆ·åˆ¤æ–­æ˜¯å¦ç­‰äº nilï¼Œå°±å¯ä»¥é˜²æ­¢è€¦åˆçš„å­˜åœ¨</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">&quot;github.com/shgopher/age&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token keyword">if</span> err<span class="token operator">:=</span> age<span class="token punctuation">.</span><span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¹Ÿæ˜¯å¤§å¤šæ•°ç¨‹åºåº”è¯¥æä¾›çš„æ¨¡å¼ï¼Œä¸å¯¹å¤–æš´éœ²ï¼Œé¿å…äº†è€¦åˆ</p> <p>é‚£ä¹ˆè¿™ç§æ–¹æ³•çš„ç¼ºé™·ä¹Ÿå¾ˆæ˜æ˜¾äº†ï¼Œå°±æ˜¯æ— æ³•è·å–æ›´å¤šçš„é”™è¯¯ä¿¡æ¯ï¼Œç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡å¿…è¦è·å–é‚£ä¹ˆå¤šé”™è¯¯ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœçœŸçš„è¦è·å–é”™è¯¯ä¿¡æ¯äº†ï¼Œè¯¥å¦‚ä½•å»åšå‘¢ï¼Ÿ</p> <p>æˆ‘ä»¬å¯ä»¥å‘å¤–æš´éœ²ä¸€äº›åŠ¨ä½œï¼Œåªæš´éœ²è¡Œä¸ºï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> mage <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€šè¿‡ä¸€ä¸ªå¯¹å¤–æš´éœ²çš„å‡½æ•°å¯ä»¥å¯¹å¤–è¾“å‡ºè¡Œä¸º</span>
<span class="token comment">// å¹¶ä¸”è¿˜ä¸ç”¨æš´éœ²å‡ºå…·ä½“çš„å¯¹è±¡</span>
<span class="token keyword">func</span> <span class="token function">IsMage</span><span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token builtin">bool</span> <span class="token punctuation">{</span>
	 a<span class="token punctuation">,</span> ok <span class="token operator">:=</span> err<span class="token punctuation">.</span><span class="token punctuation">(</span>mage<span class="token punctuation">)</span>
	 <span class="token keyword">return</span> ok <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜åŒ–ä¸å¿…è¦çš„ä»£ç è®©ç¨‹åºå˜å¾—æ›´ç®€æ´">ä¼˜åŒ–ä¸å¿…è¦çš„ä»£ç è®©ç¨‹åºå˜å¾—æ›´ç®€æ´</h3> <p>æ–¹æ³•ä¸€å°†å¤§å‡½æ•°å˜å°å‡½æ•°ï¼Œé€šè¿‡å°è£…å‡½æ•°çš„æ–¹æ³•ä»è§†è§‰ä¸Šé™ä½ if err çš„å½±å“ã€‚</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// æ”¹é€ ä¹‹å‰</span>

<span class="token keyword">func</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>src <span class="token punctuation">,</span>dst <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> r<span class="token punctuation">,</span>err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> w<span class="token punctuation">,</span>err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		r<span class="token punctuation">.</span><span class="token function">Cloase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span>err <span class="token operator">:=</span> io<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°†å‰é¢ä¸¤ä¸ªæ“ä½œå°è£…æˆä¸€ä¸ªå‡½æ•°</span>

<span class="token keyword">func</span> <span class="token function">OpenD</span><span class="token punctuation">(</span>src dst <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>os<span class="token punctuation">.</span>File<span class="token punctuation">,</span><span class="token operator">*</span>os<span class="token punctuation">.</span>File<span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> r <span class="token punctuation">,</span>w <span class="token operator">*</span>os<span class="token punctuation">.</span>File 
	<span class="token keyword">var</span> err <span class="token builtin">error</span>

	<span class="token keyword">if</span> r<span class="token punctuation">,</span>err <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span><span class="token boolean">nil</span><span class="token punctuation">,</span>err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> w<span class="token punctuation">,</span>err <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		r<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span><span class="token boolean">nil</span><span class="token punctuation">,</span>err
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> r<span class="token punctuation">,</span>w<span class="token punctuation">,</span>err
<span class="token punctuation">}</span>
<span class="token comment">// ä¸»å‡½æ•°å°±åªæœ‰ä¸€ä¸ª if err äº†</span>
<span class="token keyword">func</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>dst <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> err <span class="token builtin">error</span>
	<span class="token keyword">var</span> r<span class="token punctuation">,</span> w <span class="token operator">*</span>os<span class="token punctuation">.</span>File
	<span class="token keyword">if</span> r<span class="token punctuation">,</span>w<span class="token punctuation">,</span>err <span class="token operator">=</span> <span class="token function">OpenD</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		r<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		w<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span>err <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ–¹æ³•äºŒå°†ä»£ç ä¸­ä¸å¿…è¦çš„æˆåˆ†åˆ é™¤ï¼Œæ¥ä¿è¯ä»£ç çš„ç®€æ´</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// æ”¹é€ å‰</span>
<span class="token keyword">func</span> <span class="token function">AuthticateRequest</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token builtin">error</span><span class="token punctuation">{</span>
	err <span class="token operator">:=</span> <span class="token function">authticate</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>User<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
<span class="token comment">// å®é™…ä¸Š authticate åªè¿”å›ä¸€ä¸ª error ç±»å‹çš„æ¥å£ï¼Œæ ¹æœ¬ä¸éœ€è¦åˆ¤æ–­</span>
<span class="token keyword">func</span> <span class="token function">AuthticateRequest</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token builtin">error</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">authticate</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>User<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ–¹æ³•ä¸‰ä½¿ç”¨æ›´åŠ åˆé€‚çš„æ–¹æ³•</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// æˆ‘ä»¬è¦é€è¡Œå»è¯»å–æ•°æ®</span>

<span class="token comment">// æ”¹é€ å‰</span>
<span class="token keyword">func</span> <span class="token function">Countlines</span><span class="token punctuation">(</span>r io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span><span class="token punctuation">(</span>
		br <span class="token operator">=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
		line <span class="token builtin">int</span>
		err <span class="token builtin">error</span>
	<span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token boolean">_</span><span class="token punctuation">,</span>err <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readline</span><span class="token punctuation">(</span><span class="token char">'\n'</span><span class="token punctuation">)</span>
		line <span class="token operator">++</span> 
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">,</span>err
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> lines<span class="token punctuation">,</span><span class="token boolean">nil</span>
		
<span class="token punctuation">}</span>

<span class="token comment">// ä»£ç çœ‹èµ·æ¥ä¹Ÿæ˜¯å¾ˆåˆç†çš„æ ·å­ï¼Œä¹Ÿå¾ˆç®€æ´ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å…¶å®ç”¨çš„å‡½æ•°ä¸æ˜¯ç‰¹åˆ«çš„åˆé€‚</span>

<span class="token comment">//å…¶å®è¿™é‡Œä½¿ç”¨ scan æ›´åŠ åˆé€‚ï¼Œä»£ç é‡æ›´åŠ ç²¾ç®€ï¼Œå¹¶ä¸”ç»“æ„å¼‚å¸¸èˆ’æœ</span>
<span class="token keyword">func</span> <span class="token function">Countlines</span><span class="token punctuation">(</span>r io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	
	sc <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
	lines <span class="token operator">:=</span> <span class="token number">0</span>

	<span class="token keyword">for</span> sc<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		lines<span class="token operator">++</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">return</span> lines<span class="token punctuation">,</span> sc<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="é”™è¯¯åº”è¯¥åªå¤„ç†ä¸€æ¬¡">é”™è¯¯åº”è¯¥åªå¤„ç†ä¸€æ¬¡</h3> <p>æˆ‘ä»¬æœ‰æ—¥å¿—ç³»ç»Ÿï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬å‘ç°ä¸€ä¸ªé”™è¯¯ï¼Œç„¶åæ‰“äº†ä¸€ä¸ªæ—¥å¿—ï¼Œç„¶ååˆæŠŠé”™è¯¯ç»™ return äº†ï¼Œå®é™…ä¸Šè¿™ä¸ go è¯­è¨€å“²å­¦ä¸­è¯´çš„é”™è¯¯åªå¤„ç†ä¸€æ¬¡ç›¸è¿èƒŒ</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// âŒ</span>
<span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span><span class="token punctuation">{</span>
	 <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span>  err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Prinln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// âœ…</span>
<span class="token keyword">func</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span><span class="token punctuation">{</span>
	 <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span>  err<span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">Wrap</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span><span class="token string">&quot;open error&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ­£ç¡®çš„å¤„ç†æ–¹æ³•æ˜¯é”™è¯¯åªå¤„ç†ä¸€æ¬¡ï¼Œé‚£ä¹ˆåœ¨ä»€ä¹ˆæ—¶å€™å¤„ç†å‘¢ï¼Ÿ</p> <p>ä¸Šæ–‡æåˆ°äº†å¤šå±‚çš„æ¶æ„è®¾è®¡ï¼Œæˆ‘ä»¬åœ¨åº•å±‚ (å¸¦æœ‰å †æ ˆçš„é”™è¯¯å‘ä¸ŠæŠ›å‡º) å’Œä¸­å±‚ (ä»…ä»…é™„åŠ ä¿¡æ¯å†æ¬¡å‘ä¸ŠæŠ›å‡º) ä»…ä»…æ˜¯å‘ä¸ŠæŠ›å‡ºï¼Œå¹¶ä¸éœ€è¦å°†é”™è¯¯è®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œåœ¨åº”ç”¨å±‚æ‰éœ€è¦å»ä½¿ç”¨æ—¥å¿—è®°å½•é”™è¯¯ï¼Œæ—¥å¿—è®°å½•å®Œé”™è¯¯ä»¥åï¼Œä¹Ÿä¸éœ€è¦å†å‘ä¸ŠæŠ›å‡ºé”™è¯¯äº† (æœ€é¡¶ç«¯äº†) å®Œå…¨æ»¡è¶³ â€œåªå¤„ç†ä¸€æ¬¡é”™è¯¯â€ çš„è¦æ±‚ã€‚</p> <h2 id="ä¸šåŠ¡-code-ç çš„è®¾ç½®">ä¸šåŠ¡ code ç çš„è®¾ç½®</h2> <p>å¸¸è§çš„ http é”™è¯¯ç æ•°é‡è¾ƒå°‘ï¼Œæ¯”å¦‚å¸¸è§çš„åªæœ‰ä¾‹å¦‚ 404 301 302 200 503 ç­‰ï¼Œç»å¯¹æ•°é‡è¿˜æ˜¯è¾ƒå°‘ï¼Œæ— æ³•å»è¡¨è¾¾ä¸šåŠ¡ä¸Šçš„é”™è¯¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€å¥—èƒ½è¡¨è¾¾å…·ä½“ç”Ÿäº§ä¸šåŠ¡çš„ code ç ã€‚</p> <p>ä¸ºäº†ä¿è¯æœåŠ¡ç«¯çš„å®‰å…¨ï¼Œæˆ‘ä»¬è®¾ç½®çš„ code ç åº”è¯¥è®¾ç½®ä¸¤å¥—æ•°æ®ï¼Œä¸€å¥—æ˜¾ç¤ºç»™å®¢æˆ·ç«¯ï¼Œä¸€å¥—è‡ªç”¨ï¼Œä»¥æ­¤æ¥ä¿è¯æœåŠ¡ç«¯çš„ç»å¯¹å®‰å…¨ã€‚</p> <p>æœ‰ä¸‰ç§è®¾è®¡ä¸šåŠ¡ code ç çš„æ–¹å¼ï¼š</p> <h3 id="ä¸€å¾‹è¿”å›-http-status-200-å…·ä½“-code-ç å•ç‹¬è®¾ç½®">ä¸€å¾‹è¿”å› http status 200ï¼Œå…·ä½“ code ç å•ç‹¬è®¾ç½®</h3> <p>ä¾‹å¦‚</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Syntax error \&quot;Field picture specified more than once. This is only possible before version 2.1\&quot; at character 23: id,name,picture,picture&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OAuthException&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">2500</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fbtrace_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxxx&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>http status code é€šé€š 200</li> <li>code 2500ï¼Œæ‰æ˜¯çœŸå®çš„é¢å‘å®¢æˆ·ç«¯çš„ code ç </li></ul> <p>ä½¿ç”¨è¿™ç§æ–¹æ³•çš„ä¸€å¤§ç¼ºé™·å°±æ˜¯å¿…é¡»è§£æ body å†…å®¹æ‰èƒ½å‘ç°å…·ä½“çš„é”™è¯¯ä¸šåŠ¡ç ï¼Œå¾ˆå¤šåœºæ™¯æˆ‘ä»¬ä»…ä»…éœ€è¦çŸ¥é“è¿”å›çš„æ˜¯æˆåŠŸæˆ–è€…é”™è¯¯ï¼Œå¹¶ä¸éœ€è¦çŸ¥æ™“å…·ä½“çš„ä¸šåŠ¡ç ï¼Œè¿™æ˜¯è¿™ç§æ–¹å¼çš„ä¸€å¤§å¼Šç«¯ã€‚</p> <h3 id="ä½¿ç”¨åˆé€‚çš„-http-status-code-ç®€å•çš„ä¿¡æ¯ä»¥åŠä¸šåŠ¡é”™è¯¯ä»£ç ">ä½¿ç”¨åˆé€‚çš„ http status code + ç®€å•çš„ä¿¡æ¯ä»¥åŠä¸šåŠ¡é”™è¯¯ä»£ç </h3> <div class="language-bash extra-class"><pre class="language-bash"><code>HTTP/1.1 <span class="token number">400</span> Bad Request
x-connection-hash: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
set-cookie: <span class="token assign-left variable">guest_id</span><span class="token operator">=</span>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Date: Thu, 01 Jun <span class="token number">2017</span> 03:04:23 GMT
Content-Length: <span class="token number">62</span>
x-response-time: <span class="token number">5</span>
strict-transport-security: max-age<span class="token operator">=</span><span class="token number">631138519</span>
Connection: keep-alive
Content-Type: application/json<span class="token punctuation">;</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>utf-8
Server: tsa_b

<span class="token comment"># æ³¨æ„è¿™é‡Œï¼šä»…ä»…è¿”å›ç®€å•çš„é”™è¯¯ä¿¡æ¯</span>
<span class="token punctuation">{</span><span class="token string">&quot;errors&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:215,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Bad Authentication data.&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p>è¿™ç§æ–¹æ¡ˆä¹Ÿæ˜¯å¤§å¤šæ•°å…¬å¸é‡‡çº³çš„æ–¹æ¡ˆï¼Œä½¿ç”¨å…·ä½“çš„ http status code å¯ä»¥çŸ¥æ™“å¤§æ¦‚çš„ä¸šåŠ¡ç±»å‹ï¼Œæ˜¯é”™è¯¯è¿˜æ˜¯æ­£å¸¸è¿è¡Œï¼Œç„¶åä½¿ç”¨ç®€å•çš„é”™è¯¯ä¿¡æ¯å’Œä¸šåŠ¡é”™è¯¯ä»£ç å»å®šä½å…·ä½“çš„é”™è¯¯</p> <p>å¦‚æœä¸šåŠ¡ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼å³å¯</p> <h3 id="ä½¿ç”¨åˆé€‚çš„-http-status-code-éå¸¸è¯¦ç»†çš„ä¸šåŠ¡é”™è¯¯ä»£ç ä»¥åŠä¿¡æ¯">ä½¿ç”¨åˆé€‚çš„ http status code + éå¸¸è¯¦ç»†çš„ä¸šåŠ¡é”™è¯¯ä»£ç ä»¥åŠä¿¡æ¯</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>HTTP/1.1 <span class="token number">400</span>
Date: Thu, 01 Jun <span class="token number">2017</span> 03:40:55 GMT
Content-Length: <span class="token number">276</span>
Connection: keep-alive
Content-Type: application/json<span class="token punctuation">;</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>utf-8
Server: Microsoft-IIS/10.0
X-Content-Type-Options: nosniff

<span class="token punctuation">{</span><span class="token string">&quot;SearchResponse&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;Version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.2&quot;</span>,<span class="token string">&quot;Query&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;SearchTerms&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;api error codes&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;Errors&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;Code&quot;</span>:1001,<span class="token string">&quot;Message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Required parameter is missing.&quot;</span>,<span class="token string">&quot;Parameter&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;SearchRequest.AppId&quot;</span>,<span class="token string">&quot;HelpUrl&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http<span class="token entity" title="\u003a">\u003a</span><span class="token entity" title="\u002f">\u002f</span><span class="token entity" title="\u002f">\u002f</span>msdn.microsoft.com<span class="token entity" title="\u002f">\u002f</span>en-us<span class="token entity" title="\u002f">\u002f</span>library<span class="token entity" title="\u002f">\u002f</span>dd251042.aspx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>å½“ä¸šåŠ¡é€»è¾‘ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå¹¶ä¸”éœ€è¦æå…¶ç²¾å‡†å’Œå¿«é€Ÿçš„å®šä½é”™è¯¯æ—¶ï¼Œå°±éœ€è¦åœ¨è¿”å›çš„ body ä¸­å»è®¾ç½®éå¸¸è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯</p> <p><strong>ç»¼ä¸Šæ‰€è¿°ï¼š</strong></p> <ul><li>ä½¿ç”¨æ­£ç¡®çš„ http status code è®©ä¸šåŠ¡çš„ç¬¬ä¸€æ­¥å˜å¾—æ›´åŠ ç›´è§‚</li> <li>åŒºåˆ«äº http status codeï¼Œå…·ä½“ä¸šåŠ¡çš„ code ç ä¼šæ›´åŠ ä¸°å¯Œ</li> <li>è¿”å›å°½å¯èƒ½è¯¦ç»†çš„é”™è¯¯ï¼Œæœ‰åŠ©äºå¤æ‚é€»è¾‘çš„å¿«é€Ÿé”™è¯¯å®šä½</li> <li>ç›´æ¥è¿”å›ç»™å®¢æˆ·çš„é”™è¯¯ä»£ç ä¸åº”è¯¥åŒ…æ‹¬æ•æ„Ÿä¿¡æ¯ï¼Œæ•æ„Ÿä¿¡æ¯çš„ code ç ä»…ä¾›å†…éƒ¨ä½¿ç”¨</li> <li>é”™è¯¯ä¿¡æ¯è¦æ±‚è§„èŒƒï¼Œç®€æ´ä»¥åŠæœ‰ç”¨</li></ul> <h3 id="ä¸šåŠ¡-code-ç çš„å…·ä½“è®¾è®¡">ä¸šåŠ¡ code ç çš„å…·ä½“è®¾è®¡</h3> <p>å¼•å…¥ä¸šåŠ¡ code ç çš„æ ¸å¿ƒåŸå› å°±æ˜¯ http status code å¤ªå°‘ï¼Œä»¥åŠä»–ä»¬å¹¶ä¸èƒ½è·Ÿå…·ä½“ä¸šåŠ¡æŒ‚é’©ã€‚</p> <p>å½“æˆ‘ä»¬è®¾ç½®å¥½è‰¯å¥½åˆè¯¦ç»†çš„ code ç æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿå®šä½ä¸šåŠ¡ä»£ç ï¼Œä»¥åŠå¯ä»¥å¿«é€ŸçŸ¥æ™“å‘ç”Ÿé”™è¯¯çš„ç­‰çº§æ¨¡å—ï¼Œå…·ä½“ä¿¡æ¯ç­‰</p> <p>ä¸‹é¢ç»™å‡ºå…·ä½“çš„è®¾è®¡æ€è·¯ï¼š<strong>çº¯æ•°å­—è¡¨è¾¾ï¼Œä¸åŒçš„æ•°å­—æ®µè¡¨è¾¾ä¸åŒçš„æ¨¡å—ä¸åŒçš„ä¸šåŠ¡</strong></p> <p>ä¾‹å¦‚ 100101</p> <ul><li>10ï¼šè¡¨ç¤ºæŸä¸ªæœåŠ¡</li> <li>01ï¼šè¡¨ç¤ºæŸä¸ªæœåŠ¡ä¸‹çš„æ¨¡å—</li> <li>01ï¼šæ¨¡å—ä¸‹çš„é”™è¯¯ç </li></ul> <p>10 æœåŠ¡ 01 æ¨¡å— 01 é”™è¯¯ï¼Œ--- æœåŠ¡ 10 æ•°æ®åº“æ¨¡å—æœªæ‰¾åˆ°è®°å½•é”™è¯¯</p> <p>ä¸€å…±æœ€å¤šæœ‰ 100 ä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡æœ€å¤šæœ‰ 100 ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æœ€å¤šæœ‰ 100 ä¸ªé”™è¯¯ï¼Œå¦‚æœæŸäº›æ¨¡å— 100 ä¸ªéƒ½ä¸å¤Ÿç”¨ï¼Œé‚£æ€ä¹ˆè¿™ä¸ªæ¨¡å—æœ‰å¿…è¦å»æ‹†åˆ†ä¸€ä¸‹äº†ã€‚</p> <h3 id="å¦‚ä½•è®¾ç½®-http-status-code">å¦‚ä½•è®¾ç½® http status code</h3> <ul><li><code>1xx</code>ï¼šè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</li> <li><code>2xx</code>ï¼šæˆåŠŸå¤„ç†äº†è¯·æ±‚</li> <li><code>3xx</code>ï¼šè¯·æ±‚è¢«é‡å®šå‘</li> <li><code>4xx</code>ï¼šè¯·æ±‚é”™è¯¯</li> <li><code>5xx</code>ï¼šæœåŠ¡å™¨é”™è¯¯</li></ul> <p>ç”±äº http status code ç›¸å¯¹æ•°é‡ä¹Ÿä¸ç®—å¤ªå°‘ï¼Œå¦‚æœæ¯ä¸€ä¸ªéƒ½åˆ©ç”¨ä¸Šï¼Œéš¾å…ä¼šå¢åŠ å¤æ‚åº¦ï¼Œå»ºè®®ä»…ä½¿ç”¨åŸºæœ¬çš„å‡ ä¸ªå³å¯</p> <ul><li>200 - è¡¨ç¤ºè¯·æ±‚æˆåŠŸæ‰§è¡Œã€‚</li> <li>400 - è¡¨ç¤ºå®¢æˆ·ç«¯å‡ºé—®é¢˜ã€‚</li> <li>500 - è¡¨ç¤ºæœåŠ¡ç«¯å‡ºé—®é¢˜ã€‚</li></ul> <p>å¦‚æœä¸Šè¿°çš„æ„Ÿè§‰å¤ªå°‘ï¼Œå†å¢åŠ ä¸‹é¢å‡ ä¸ªä¹Ÿå¯ä»¥</p> <ul><li>401 - è¡¨ç¤ºè®¤è¯å¤±è´¥ã€‚</li> <li>403 - è¡¨ç¤ºæˆæƒå¤±è´¥ã€‚</li> <li>404 - è¡¨ç¤ºèµ„æºæ‰¾ä¸åˆ°ï¼Œè¿™é‡Œçš„èµ„æºå¯ä»¥æ˜¯ URL æˆ–è€… RESTful èµ„æºã€‚</li></ul> <p>å°† http status code æ§åˆ¶åœ¨<strong>ä¸ªä½æ•°</strong>ï¼Œæœ‰åˆ©äºåç«¯çš„é€»è¾‘ä»£ç ç®€æ´æ€§ï¼Œæ¯”å¦‚ 301 302 ç¡®å®æ˜¯ä»£è¡¨ä¸åŒçš„å«ä¹‰ï¼Œ<strong>å‰ç«¯æˆ–è®¸å¯ä»¥è®¾ç½®ä¸°å¯Œçš„ http status codeï¼Œå› ä¸ºæµè§ˆå™¨ä¼šè¿›è¡Œç›¸å…³çš„å…·ä½“æ“ä½œï¼Œä½†æ˜¯åç«¯è¿”å›ç»™å‰ç«¯çš„ http status code å¹¶æ²¡æœ‰ä»»ä½•çš„æ“ä½œï¼Œä½¿ç”¨è¿‡å¤šåªä¼šå¢åŠ å¤æ‚åº¦ã€‚</strong></p> <h2 id="è®¾è®¡ä¸€ä¸ªç”Ÿäº§çº§çš„é”™è¯¯åŒ…">è®¾è®¡ä¸€ä¸ªç”Ÿäº§çº§çš„é”™è¯¯åŒ…</h2> <h3 id="ç”Ÿäº§çº§çš„é”™è¯¯åŒ…éœ€è¦çš„åŠŸèƒ½">ç”Ÿäº§çº§çš„é”™è¯¯åŒ…éœ€è¦çš„åŠŸèƒ½</h3> <ol><li>æ”¯æŒé”™è¯¯å †æ ˆ</li></ol> <div class="language-go extra-class"><pre class="language-go"><code><span class="token number">2021</span><span class="token operator">/</span><span class="token number">07</span><span class="token operator">/</span><span class="token number">02</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">17</span><span class="token punctuation">:</span><span class="token number">03</span> call <span class="token keyword">func</span> got failed<span class="token punctuation">:</span> <span class="token keyword">func</span> called <span class="token builtin">error</span>

main<span class="token punctuation">.</span>funcB <span class="token operator">/</span>home<span class="token operator">/</span>colin<span class="token operator">/</span>workspace<span class="token operator">/</span>golang<span class="token operator">/</span>src<span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>marmotedu<span class="token operator">/</span>gopractise<span class="token operator">-</span>demo<span class="token operator">/</span>errors<span class="token operator">/</span>good<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">27</span>
main<span class="token punctuation">.</span>funcA <span class="token operator">/</span>home<span class="token operator">/</span>colin<span class="token operator">/</span>workspace<span class="token operator">/</span>golang<span class="token operator">/</span>src<span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>marmotedu<span class="token operator">/</span>gopractise<span class="token operator">-</span>demo<span class="token operator">/</span>errors<span class="token operator">/</span>good<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">19</span>
main<span class="token punctuation">.</span>main <span class="token operator">/</span>home<span class="token operator">/</span>colin<span class="token operator">/</span>workspace<span class="token operator">/</span>golang<span class="token operator">/</span>src<span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>marmotedu<span class="token operator">/</span>gopractise<span class="token operator">-</span>demo<span class="token operator">/</span>errors<span class="token operator">/</span>good<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">10</span>
runtime<span class="token punctuation">.</span>main <span class="token operator">/</span>home<span class="token operator">/</span>colin<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">/</span>go1<span class="token punctuation">.</span><span class="token number">16.2</span><span class="token operator">/</span>src<span class="token operator">/</span>runtime<span class="token operator">/</span>proc<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span>225runtime<span class="token punctuation">.</span>goexit <span class="token operator">/</span>home<span class="token operator">/</span>colin<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">/</span>go1<span class="token punctuation">.</span><span class="token number">16.2</span><span class="token operator">/</span>src<span class="token operator">/</span>runtime<span class="token operator">/</span>asm_amd64<span class="token punctuation">.</span>s<span class="token punctuation">:</span><span class="token number">1371</span>
exit status <span class="token number">1</span>
</code></pre></div><p>æ‹¥æœ‰é”™è¯¯çš„å †æ ˆï¼Œæˆ‘ä»¬æ‰èƒ½å®šä½é”™è¯¯çš„æ ¹æºã€‚</p> <ol start="2"><li><p>æ”¯æŒæ‰“å°ä¸åŒçš„æ ¼å¼æ¯”å¦‚ %s %w %d</p></li> <li><p>æ”¯æŒ Wrap() Unwrap() çš„åŠŸèƒ½ï¼Œå°±æ˜¯é”™è¯¯çš„åµŒå¥—å’ŒååµŒå¥—</p></li> <li><p>é”™è¯¯åŒ…è¦æ”¯æŒ Is() å’Œ As() æ–¹æ³•ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºæœ‰é”™è¯¯çš„åµŒå¥—ï¼Œæ‰€ä»¥æ— æ³•å†ä½¿ç”¨æ¥å£ç›¸æ¯”è¾ƒçš„æ–¹å¼è¿›è¡Œåˆ¤æ–­æ¥å£ç±»å‹æ˜¯å¦ç›¸ç­‰ (ç±»å‹ç›¸åŒï¼Œå€¼ç›¸åŒ)</p></li> <li><p>è¦æ”¯æŒæ ¼å¼åŒ–å’Œéæ ¼å¼åŒ–çš„åˆ›å»ºæ–¹å¼</p></li></ol> <div class="language-go extra-class"><pre class="language-go"><code>errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%w&quot;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
</code></pre></div><h3 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h3> <p>ä» github.com/pkg/errors åŒ…ä¸­æ”¹é€ å³å¯ã€‚</p> <p>å¢åŠ ä»¥ä¸‹å­—æ®µçš„ç»“æ„ä½“å°±å¯ä»¥æ»¡è¶³ä¸Šé¢çš„éœ€æ±‚</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> withCode <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	err   <span class="token builtin">error</span>
	code  <span class="token builtin">int</span>
	cause <span class="token builtin">error</span>
	<span class="token operator">*</span>stack
<span class="token punctuation">}</span>
</code></pre></div><h2 id="issues">issues</h2> <p><code>é—®é¢˜ä¸€ï¼š</code> <strong>è¯·è¯´å‡ºä¸‹åˆ—ä»£ç çš„æ‰§è¡Œè¾“å‡º</strong>*</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;hi1&quot;</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;oops&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// è¿™é‡Œçš„deferå°†ä¸ä¼šè¿›æ ˆï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸ä¼šæ‰§è¡Œäº†ã€‚</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;hi2&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>ç­”æ¡ˆæ˜¯</p> <div class="language-go extra-class"><pre class="language-go"><code>hi1
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
oops
<span class="token builtin">panic</span><span class="token punctuation">:</span> oops

goroutine <span class="token number">1</span> <span class="token punctuation">[</span>running<span class="token punctuation">]</span><span class="token punctuation">:</span>
main<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">/</span>tmp<span class="token operator">/</span>sandbox1932632082<span class="token operator">/</span>prog<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">18</span> <span class="token operator">+</span><span class="token number">0xa7</span>

Program exited<span class="token punctuation">.</span>
</code></pre></div><p>è§£é‡Šï¼šPanicï¼Œæ„å‘³ç€ææ…Œï¼Œæ„æ€ç­‰äº returnï¼Œæ‰€ä»¥ panic ä¸‹é¢çš„æ•°æ®æ˜¯æ— æ³•æ‰§è¡Œçš„ï¼Œdefer ä¸åŒï¼Œä»–ä»¬æ˜¯é¡ºåºçš„å°†è¿™äº› defer å‡½æ•°è£…å…¥å‡½æ•°å†…ç½®çš„ defer æ ˆçš„ï¼Œæ‰€ä»¥åœ¨ return ä¹‹åï¼Œdefer æ ˆä¼šæ‰§è¡Œï¼Œæ‰€ä»¥è¿™é‡Œçš„ defer 1 2 3 å¯ä»¥æ‰§è¡Œï¼ŒPanic å‰é¢çš„ hi1 å¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯ Panic ä¹‹åï¼Œç›¸å½“äº return åé¢çš„ hi2 å°±æ— æ³•æ‰§è¡Œäº†ã€‚</p> <p><code>é—®é¢˜äºŒï¼š</code> <strong>çœ‹ä¸€æ®µä»£ç ï¼Œåˆ†æç­”æ¡ˆ</strong></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> r <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> r <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Recovered in f&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;starting f&quot;</span><span class="token punctuation">)</span>
	<span class="token function">g</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;behind  g&quot;</span><span class="token punctuation">)</span> <span class="token comment">//ä¼šç»ˆæ­¢æ‰§è¡Œ</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">g</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Defer in g&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Panicking!&quot;</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%v&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Printing in g&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token comment">//ç»ˆæ­¢æ‰§è¡Œ</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç­”æ¡ˆæ˜¯</p> <div class="language-js extra-class"><pre class="language-js"><code>starting f
panicking
Defer <span class="token keyword">in</span> g <span class="token number">2</span>
recoverd <span class="token keyword">in</span> f
</code></pre></div><p>è§£é‡Šä¸€ä¸‹ï¼Œé¦–å…ˆæ‰§è¡Œçš„æ˜¯ f å‡½æ•°çš„ä»£ç ï¼Œç„¶åå¼€å§‹æ‰§è¡Œ gï¼Œåœ¨ g ä¸­é‡åˆ°äº† Panicï¼Œæ‰€ä»¥ panic åé¢çš„ parinting in g å°±æ— æ³•æ‰§è¡Œäº†ï¼Œæ‰€ä»¥æ‰§è¡Œäº† defer in g
è¿™ä¸ªæ—¶å€™ f ä¸­çš„ g(2) åé¢çš„æ•°æ®ä¹Ÿæ— æ³•æ‰§è¡Œäº†ï¼Œå› ä¸ºæ•´ä¸ª f ä¹Ÿé™·å…¥äº†ææ…Œï¼Œæ‰€ä»¥å®ƒåªèƒ½ return è¿›å…¥ defer äº†ï¼Œdefer ä¸­åˆšå¥½æœ‰ recoverï¼Œæ‰€ä»¥æ‰§è¡Œäº† recover ä¿¡æ¯åï¼Œå°±é€€å‡ºäº†å‡½æ•°ã€‚</p> <h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2> <ul><li>https://mp.weixin.qq.com/s/EvkMQCPwg-B0ffZonpwXodg</li> <li>https://mp.weixin.qq.com/s/D_CVrPzjP3O81EpFqLoynQ</li> <li>https://time.geekbang.org/column/article/391895</li> <li>æå®¢æ—¶é—´ã€Šgo è¿›é˜¶è®­ç»ƒè¥ã€‹</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shgopher/GOFamily/edit/release/åŸºç¡€/é”™è¯¯å¤„ç†/README.md" target="_blank" rel="noopener noreferrer">åœ¨GitHubä¸­ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°:</span> <span class="time">1/5/2024, 2:50:37 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/GOFamily/assets/js/app.6dac5fbf.js" defer></script><script src="/GOFamily/assets/js/2.5c331e53.js" defer></script><script src="/GOFamily/assets/js/44.5dc33e34.js" defer></script>
  </body>
</html>
