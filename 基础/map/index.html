<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>map | GOFamily - go 程序员宝典</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="/GOFamily/favicon.ico">
    <meta name="description" content="🔥 go 程序员宝典，包含了：算法，数据库，网络操作系统，分布式，系统设计等一揽子知识体系">
    
    <link rel="preload" href="/GOFamily/assets/css/0.styles.93ee3edc.css" as="style"><link rel="preload" href="/GOFamily/assets/js/app.6dac5fbf.js" as="script"><link rel="preload" href="/GOFamily/assets/js/2.5c331e53.js" as="script"><link rel="preload" href="/GOFamily/assets/js/7.5c52a687.js" as="script"><link rel="prefetch" href="/GOFamily/assets/js/10.993cf521.js"><link rel="prefetch" href="/GOFamily/assets/js/100.8a13422e.js"><link rel="prefetch" href="/GOFamily/assets/js/101.56e8a149.js"><link rel="prefetch" href="/GOFamily/assets/js/102.0befb22b.js"><link rel="prefetch" href="/GOFamily/assets/js/103.318b2dd9.js"><link rel="prefetch" href="/GOFamily/assets/js/104.5190ec56.js"><link rel="prefetch" href="/GOFamily/assets/js/105.27135b71.js"><link rel="prefetch" href="/GOFamily/assets/js/106.ee0a923b.js"><link rel="prefetch" href="/GOFamily/assets/js/107.abf9bc9d.js"><link rel="prefetch" href="/GOFamily/assets/js/108.339b1d12.js"><link rel="prefetch" href="/GOFamily/assets/js/109.7ee4cfe4.js"><link rel="prefetch" href="/GOFamily/assets/js/11.0307bcae.js"><link rel="prefetch" href="/GOFamily/assets/js/110.25bb24d2.js"><link rel="prefetch" href="/GOFamily/assets/js/111.800f7506.js"><link rel="prefetch" href="/GOFamily/assets/js/112.b73333d2.js"><link rel="prefetch" href="/GOFamily/assets/js/113.3bed7499.js"><link rel="prefetch" href="/GOFamily/assets/js/114.c126b120.js"><link rel="prefetch" href="/GOFamily/assets/js/115.773ca7ce.js"><link rel="prefetch" href="/GOFamily/assets/js/12.521ef871.js"><link rel="prefetch" href="/GOFamily/assets/js/13.6a579e8b.js"><link rel="prefetch" href="/GOFamily/assets/js/14.fa863532.js"><link rel="prefetch" href="/GOFamily/assets/js/15.ccbbdb7a.js"><link rel="prefetch" href="/GOFamily/assets/js/16.2a7384f8.js"><link rel="prefetch" href="/GOFamily/assets/js/17.50442aef.js"><link rel="prefetch" href="/GOFamily/assets/js/18.4b8a1599.js"><link rel="prefetch" href="/GOFamily/assets/js/19.fce83f0a.js"><link rel="prefetch" href="/GOFamily/assets/js/20.c57281b8.js"><link rel="prefetch" href="/GOFamily/assets/js/21.19939807.js"><link rel="prefetch" href="/GOFamily/assets/js/22.a6f2abf2.js"><link rel="prefetch" href="/GOFamily/assets/js/23.a3a10d16.js"><link rel="prefetch" href="/GOFamily/assets/js/24.edf743ad.js"><link rel="prefetch" href="/GOFamily/assets/js/25.c1fe94a5.js"><link rel="prefetch" href="/GOFamily/assets/js/26.529d156a.js"><link rel="prefetch" href="/GOFamily/assets/js/27.baf2939d.js"><link rel="prefetch" href="/GOFamily/assets/js/28.69e5608b.js"><link rel="prefetch" href="/GOFamily/assets/js/29.742dd6e8.js"><link rel="prefetch" href="/GOFamily/assets/js/3.159fe1e3.js"><link rel="prefetch" href="/GOFamily/assets/js/30.4aafb94a.js"><link rel="prefetch" href="/GOFamily/assets/js/31.87baab0b.js"><link rel="prefetch" href="/GOFamily/assets/js/32.1ea926c5.js"><link rel="prefetch" href="/GOFamily/assets/js/33.4d31d0db.js"><link rel="prefetch" href="/GOFamily/assets/js/34.7610889f.js"><link rel="prefetch" href="/GOFamily/assets/js/35.07f8b036.js"><link rel="prefetch" href="/GOFamily/assets/js/36.d1acb39c.js"><link rel="prefetch" href="/GOFamily/assets/js/37.1fac0e0a.js"><link rel="prefetch" href="/GOFamily/assets/js/38.53670642.js"><link rel="prefetch" href="/GOFamily/assets/js/39.9c8315fb.js"><link rel="prefetch" href="/GOFamily/assets/js/4.a73c4d70.js"><link rel="prefetch" href="/GOFamily/assets/js/40.c47687be.js"><link rel="prefetch" href="/GOFamily/assets/js/41.73deb46e.js"><link rel="prefetch" href="/GOFamily/assets/js/42.85cfacd9.js"><link rel="prefetch" href="/GOFamily/assets/js/43.1b441a63.js"><link rel="prefetch" href="/GOFamily/assets/js/44.5dc33e34.js"><link rel="prefetch" href="/GOFamily/assets/js/45.e7e66273.js"><link rel="prefetch" href="/GOFamily/assets/js/46.146ccd16.js"><link rel="prefetch" href="/GOFamily/assets/js/47.aa0964bb.js"><link rel="prefetch" href="/GOFamily/assets/js/48.0f67a15e.js"><link rel="prefetch" href="/GOFamily/assets/js/49.565c30a8.js"><link rel="prefetch" href="/GOFamily/assets/js/5.864fc44c.js"><link rel="prefetch" href="/GOFamily/assets/js/50.0f964c86.js"><link rel="prefetch" href="/GOFamily/assets/js/51.9dd5ff4a.js"><link rel="prefetch" href="/GOFamily/assets/js/52.d3f06485.js"><link rel="prefetch" href="/GOFamily/assets/js/53.60bb95e9.js"><link rel="prefetch" href="/GOFamily/assets/js/54.ee26f0f5.js"><link rel="prefetch" href="/GOFamily/assets/js/55.7b5dc58d.js"><link rel="prefetch" href="/GOFamily/assets/js/56.e3024720.js"><link rel="prefetch" href="/GOFamily/assets/js/57.74cebe2c.js"><link rel="prefetch" href="/GOFamily/assets/js/58.2eea170e.js"><link rel="prefetch" href="/GOFamily/assets/js/59.a733d97b.js"><link rel="prefetch" href="/GOFamily/assets/js/6.f4af1c68.js"><link rel="prefetch" href="/GOFamily/assets/js/60.31fce32e.js"><link rel="prefetch" href="/GOFamily/assets/js/61.025df443.js"><link rel="prefetch" href="/GOFamily/assets/js/62.dfeb9d10.js"><link rel="prefetch" href="/GOFamily/assets/js/63.088bb315.js"><link rel="prefetch" href="/GOFamily/assets/js/64.7503aa28.js"><link rel="prefetch" href="/GOFamily/assets/js/65.9e82002d.js"><link rel="prefetch" href="/GOFamily/assets/js/66.fd22a77b.js"><link rel="prefetch" href="/GOFamily/assets/js/67.613f77e3.js"><link rel="prefetch" href="/GOFamily/assets/js/68.42cf41b2.js"><link rel="prefetch" href="/GOFamily/assets/js/69.a1051de8.js"><link rel="prefetch" href="/GOFamily/assets/js/70.8c3a3873.js"><link rel="prefetch" href="/GOFamily/assets/js/71.57746954.js"><link rel="prefetch" href="/GOFamily/assets/js/72.5afe8bc8.js"><link rel="prefetch" href="/GOFamily/assets/js/73.03d8974c.js"><link rel="prefetch" href="/GOFamily/assets/js/74.4f1eeb3c.js"><link rel="prefetch" href="/GOFamily/assets/js/75.d44fc2e7.js"><link rel="prefetch" href="/GOFamily/assets/js/76.f53bf284.js"><link rel="prefetch" href="/GOFamily/assets/js/77.bad2588a.js"><link rel="prefetch" href="/GOFamily/assets/js/78.2ee31447.js"><link rel="prefetch" href="/GOFamily/assets/js/79.f5c3f20d.js"><link rel="prefetch" href="/GOFamily/assets/js/8.419c1695.js"><link rel="prefetch" href="/GOFamily/assets/js/80.5aa44af4.js"><link rel="prefetch" href="/GOFamily/assets/js/81.33455a03.js"><link rel="prefetch" href="/GOFamily/assets/js/82.9f2284bd.js"><link rel="prefetch" href="/GOFamily/assets/js/83.5dc60988.js"><link rel="prefetch" href="/GOFamily/assets/js/84.b93653e7.js"><link rel="prefetch" href="/GOFamily/assets/js/85.17171820.js"><link rel="prefetch" href="/GOFamily/assets/js/86.411754fa.js"><link rel="prefetch" href="/GOFamily/assets/js/87.94cb9c84.js"><link rel="prefetch" href="/GOFamily/assets/js/88.bf9b9181.js"><link rel="prefetch" href="/GOFamily/assets/js/89.30daa2d3.js"><link rel="prefetch" href="/GOFamily/assets/js/9.0852bf61.js"><link rel="prefetch" href="/GOFamily/assets/js/90.86c77607.js"><link rel="prefetch" href="/GOFamily/assets/js/91.77196b7c.js"><link rel="prefetch" href="/GOFamily/assets/js/92.52bff9af.js"><link rel="prefetch" href="/GOFamily/assets/js/93.2ad1e17b.js"><link rel="prefetch" href="/GOFamily/assets/js/94.cb498e95.js"><link rel="prefetch" href="/GOFamily/assets/js/95.3eff79bb.js"><link rel="prefetch" href="/GOFamily/assets/js/96.01bee062.js"><link rel="prefetch" href="/GOFamily/assets/js/97.46e63812.js"><link rel="prefetch" href="/GOFamily/assets/js/98.843925cf.js"><link rel="prefetch" href="/GOFamily/assets/js/99.d9206bf1.js">
    <link rel="stylesheet" href="/GOFamily/assets/css/0.styles.93ee3edc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/GOFamily/" class="home-link router-link-active"><img src="https://avatars.githubusercontent.com/u/42873232" alt="GOFamily - go 程序员宝典" class="logo"> <span class="site-name can-hide">GOFamily - go 程序员宝典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/GOFamily/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">系列教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">系列教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily 【go语言教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  【基础408知识教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  【系统设计教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  【工具教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  【给程序员写的书】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/GOFamily" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/GOFamily/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">系列教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">系列教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily 【go语言教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  【基础408知识教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  【系统设计教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  【工具教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  【给程序员写的书】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/GOFamily" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>map</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/map/#map-的基本操作" class="sidebar-link">map 的基本操作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/map/#map-基础知识" class="sidebar-link">map 基础知识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/map/#map-底层知识" class="sidebar-link">map 底层知识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/map/#issues" class="sidebar-link">issues</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/map/#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="map">map</h1> <p>导读：</p> <ul><li>map 的基本操作</li> <li>map 基础知识</li> <li>map 底层知识</li> <li>iussues</li></ul> <h2 id="map-的基本操作">map 的基本操作</h2> <p>因为 go 使用拉链法去构造 go 语言的 map，所以只要内存不被消耗光，map 中的元素是无限的。跟 slice 不同，map 不分 lenth 和 cap，在 make 中<strong>只有</strong>一个位置，这个位置表示的含义就是 cap</p> <p>map 的基础操作</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 声明一个新的map</span>
	<span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	<span class="token comment">// 给引用类型map分配底层数据结构</span>
	m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// or m = make(map[string]int,100)</span>
	<span class="token comment">// 插入数据</span>
	m<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
	<span class="token keyword">if</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 在初始化的时候无法初始化两个一样的key，这个检查是编译器就开始的</span>
	m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token comment">// error</span>
	<span class="token comment">// 在初始化的时候无法初始化两个一样的key，但是如果是一个变量的话是可以的，</span>
	<span class="token comment">// 因为编译器时无法获取变量的值的，所以这种方式通过。</span>
	m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token comment">// 这样是正确的。</span>
	<span class="token comment">// 遍历数据</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token string">&quot;:&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 删除数据,不存在这个数据不会panic</span>
	<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// 删除 map 所有条目</span>
	<span class="token function">clear</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="map-基础知识">map 基础知识</h2> <p>映射的第一步就是把键值转化为哈希值 (通常是一个很大的整数)，然后根据哈希值的映射，把 key-value 本体，以及对应的哈希值存储在哈希筒中，go 使用链表法充当哈希筒，当寻找值的时候，通过哈希计算，以及取模映射，先查找到哈希筒，然后使用哈希值的方式去寻找有没有符合的哈希值，如果找到了，那么再使用 key 原来的值二次比较，这一步主要是为了规避哈希碰撞，即：俩 key 算出来的哈希值是一样的这种行为。</p> <p>因为存 <code>==</code> 这种行为，所以 go 语言 map 的键值是有局限的，<strong>不可以是函数类型、字典类型和切片类型</strong>，如果是接口类型，传入的实际类型也不能是函数，字典和切片，例如</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
		<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// panic</span>
		<span class="token string">&quot;1&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><p>**虽然，map 的 key 可以设置为接口，但是最好不要这么干，因为会在运行时引入风险，比如上述代码就是风险。同样的，如果 key 是数组类型，亦或者是 struct，参数值都不能是函数，切片和 map。**无论被埋藏的有多深，都不能出现切片，map，函数这几种类型，比如说 <code>[10][2][]string</code>，运行时都会看出来。</p> <p>那么用什么类型的作为 key 值是比较推荐的呢？</p> <p>这里有两个关键词：求哈希的速度，判断相等的速度，基本原理是越简单的类型速度越快，比如 bool，int8，就比 int64 快，因为 int8 单个值只占了一个字节，int64 是 8 个字节，所以越复杂的越慢，比如一个 struct，因为求一个 struct 的哈希值，需要对里面的字段都进行哈希计算，然后合并起来，大大影响了速度，所以优先选用数值类型和指针类型 (因为指针类型也就是一个 16 进制的正整数而已)，如果选 string，最好短一些的比较好</p> <p>在内存不爆炸的情况下，map 的 key 是无限量的，随意添加。</p> <p>map 有一个最佳实践是使用形如 <code>value,ok := map[key]</code> 的 “comma OK” 的方法去获取 map 的值，OK 的意义就是为了获得 key 是否存在这个 map 里，因为就算不存在，map 也不会报错或者 Panic，返回的是这个值的零值，比如 int 就返回 0，那如果某一个 key 刚好结果是 0 就说不清了对吧，所以引入了这个 “comma ok” 机制，另外还存在一个不存在也不会 Panic 的操作，就是使用 <code>delete(map,key)</code> 的方法去删除 key 值</p> <p>map 的遍历跟 slice 一样，使用 m := range map 的方法，但是输出的顺序是不固定的，如果想输出稳定的值，可以将 range 改成普通的 for 循环，然后 key 值使用一个切片存储，这样的话，读取 key 值的时候顺序就是固定的了。</p> <h2 id="map-底层知识">map 底层知识</h2> <p>当 map 使用字面量的方式进行初始化的时候，数量小于25时，它会首先启用 make 关键字创建一个 map，然后使用 <code>m[&quot;k&quot;] = v</code> 的方式进行初始化，当超过 25 的时候，其实也差不多，它会使用两个切片分别存储 key 和 value，然后使用 <code>m[k] = v</code> 的方式进行初始化，实际上 go 的复合类型使用字面量进行初始化基本上都是这种方式，基本上的流程就是使用关键字创建底层数据，然后使用最简单的方式进行 k-v 赋值，所以你也可以把字面量的赋值当作一种语法糖。</p> <p>map 的语法在运行时会转化为另一套对应关系，这个转化是在编译器搞定的。</p> <div class="language-go extra-class"><pre class="language-go"><code>m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> m <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">makemap</span><span class="token punctuation">(</span>maptype<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token comment">// maptype 下文有解释</span>

v <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> v <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">mapaccess1</span><span class="token punctuation">(</span>maptype<span class="token punctuation">,</span>m <span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 这里实际上引入的是 &quot;hello&quot;的 指针</span>

v<span class="token punctuation">,</span>ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> v<span class="token punctuation">,</span>ok <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">mapacess2</span><span class="token punctuation">(</span>maptype<span class="token punctuation">,</span>m <span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>

m<span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span> <span class="token operator">-</span><span class="token operator">&gt;</span> v <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">mapassign</span><span class="token punctuation">(</span>maptype<span class="token punctuation">,</span>m <span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>

<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> runtiem<span class="token punctuation">.</span><span class="token function">mapdelete</span><span class="token punctuation">(</span>maptype<span class="token punctuation">,</span>m <span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>

</code></pre></div><p>hmap 是一个 struct，这个结构体拥有众多字段，它用来描述这个 map 底层应用具有的所有字段。可以理解为它是描述 map 的头部文件，存储了所有的字段，但是并不存储真实的 body。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> hmap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	count     <span class="token builtin">int</span> 
	flags     <span class="token builtin">uint8</span>
	B         <span class="token builtin">uint8</span>  
	noverflow <span class="token builtin">uint16</span> 
	hash0     <span class="token builtin">uint32</span> 
	buckets    unsafe<span class="token punctuation">.</span>Pointer  <span class="token comment">// 重点</span>
	oldbuckets unsafe<span class="token punctuation">.</span>Pointer 
	nevacuate  <span class="token builtin">uintptr</span>        
	extra <span class="token operator">*</span>mapextra 
<span class="token punctuation">}</span>

<span class="token keyword">type</span> mapextra <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	overflow    <span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>bmap
	oldoverflow <span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>bmap
	nextOverflow <span class="token operator">*</span>bmap
<span class="token punctuation">}</span>

<span class="token comment">// 这是一个桶本身的数据结构,但是在运行时阶段会重塑这个结构体，添加更多的字段</span>
<span class="token keyword">type</span> bmap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	tophash <span class="token punctuation">[</span>bucketCnt<span class="token punctuation">]</span><span class="token builtin">uint8</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这是添加字段以后的样子</span>
<span class="token comment">// 所以三个数组就完成了数据的存储，也可以避免padding的发生</span>
<span class="token keyword">type</span> bmap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    topbits  <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token builtin">uint8</span>
    keys     <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>keytype
    values   <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>valuetype
    pad      <span class="token builtin">uintptr</span>
    overflow <span class="token builtin">uintptr</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>count：当前 map 的 value 个数，len 返回的就是这个值</li> <li>flags:map 的状态标志 iterator oldterator hashwriting samesizegrow</li> <li>B：<code>2 ^ B = 桶数量</code></li> <li>noverflow：指的是 overflow 的桶的数量</li> <li>hash0：哈希函数的种子值，用作哈希函数的参数，引入随机性</li> <li>buckets：指向桶数组的指针</li> <li>oldbuckets：在 map 扩容阶段指向前一个桶的指针</li> <li>nevacuate:map 扩容阶段充当扩容进度计数器，所有下标号小于 nevacuate 的桶都是已经完成了数据排空和迁移的操作的</li> <li>extra：【此字段是可选字段】如果有 overflow 的桶出现，该字段保证 overflow 的桶不会被 gc，具体操作就是该字段存储所有指向 overflow 的桶的指针</li></ul> <p>当声明一个 map 的时候，运行时就会为这个 map 具体的变量生成一个实例，上门那个是 map 的描述符号，这里说的这个数据结构是定义这个 map 中所有元信息的。</p> <div class="language-go extra-class"><pre class="language-go"><code>
<span class="token keyword">type</span> maptype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	typ    _type
	key    <span class="token operator">*</span>_type
	elem   <span class="token operator">*</span>_type
	bucket <span class="token operator">*</span>_type <span class="token comment">// 表示hash bucket 内部的类型</span>
	<span class="token comment">// function for hashing keys (ptr to key, seed) -&gt; hash</span>
	hasher     <span class="token keyword">func</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span>Pointer<span class="token punctuation">,</span> <span class="token builtin">uintptr</span><span class="token punctuation">)</span> <span class="token builtin">uintptr</span>
	keysize    <span class="token builtin">uint8</span>  <span class="token comment">// size of key slot</span>
	elemsize   <span class="token builtin">uint8</span>  <span class="token comment">// size of elem slot</span>
	bucketsize <span class="token builtin">uint16</span> <span class="token comment">// size of bucket</span>
	flags      <span class="token builtin">uint32</span>
<span class="token punctuation">}</span>
</code></pre></div><p>go 的 map 只有一套 method，只要使用这个 maptype 的具体不同实现就可以满足操作。比如 map[int]int 和 map[int]string，他们都使用 maptype 来定义自己的元信息，但是操作这这个元信息的函数是一个，只要取不同的 typ key 这种指针类型取操作就可以了。</p> <p>存储数据的 body 本体是由一个 <code>类似二维数组</code> + <code>链表</code> 组成的，具体的图像如下：</p> <p><img src="/GOFamily/assets/img/hash.b54950a0.svg" alt=""></p> <p>tophash 区域就是为了寻找 key 和 value 使用空间换时间的原理做的索引，当我们把 hashcode 的高位值逐一比较的时候就可以确定 key 和 value 的位置。</p> <p>key 和 value 都是连续的内存区域，key 和 value 在一个桶中只能存在 8 个，多余的在不满足扩容的情况下就会存储在溢出桶中，寻找 key 和 value 使用 tophash 的位置即可，go 使用分开存储 tophash，key，value 的方式，所以 go 就避免了数据 padding，满足了内存对齐，避免了内存的浪费。需要注意的是，当 key 和 value 大于 128 个字节的时候，存储的就是他们的指针</p> <p>map 的扩容有一个具体的衡量指标，负载因子，当 hmap 中的 <code>count &gt; 负载因子 * 2^B</code> (map 的负载因子为 6.5)，或者溢出桶过多的时候，就会扩容。当因为溢出桶太多的时候，创建的新 map 的桶和现有的桶一样，当因为不满足负载因子导致的扩容时，会创建两倍于现有 bucket 的新 bucket，但是旧的桶 data 并不会立刻被迁移到新的 bucket 中，在 map 进行插入和删除的过程中旧的内容会被逐步迁移到新的桶中。原来旧的内容就会被 gc 掉。</p> <p>普通 map 的扩容并不是原子性的，所以 map 的扩容过程会去检查是否已经处于扩容中。</p> <p>当持续向 map 中写入数据，并且删除，然后继续写入删除，这个时候如果没有造成装载因子的超出，就会造成溢出桶过多的情况，这个时候就会造成内存的泄漏，所以会创建一个一样大的 map，存储没有被删除的数据，并且将那些被标记为 delete 的数据进行垃圾回收，没错，你进行 delete 的时候并没有真的 delete，只有 gc 以后才是真的 delete。</p> <p>将旧的数据放在 runtime.hmap 中的 oldbuckets 字段上，然后将新的数据结构放在 buckets 上，溢出桶的设置也是一样的，因为 extra 指向的数据结构也是三个字段，老的，新的，正在使用的。</p> <p>运行时会将一个旧桶的数据分流到两个新的桶子里，但是如果是内存泄漏的等量扩容时，就只会把一个旧桶的数据导入到一个新的桶子里，请注意这里的迁移指的是拷贝，在计数器计算数据已经被分流完全以后，旧的桶和旧的溢出桶的数据就会被 gc 掉</p> <p>因为存在旧桶和新桶，所以在查找数据的时候，会先从旧桶查找数据，如果没有再去新的桶中查找，当我们写入和删除数据的时候，除了写入的新数据到新的桶中，也会把旧的桶中的一部分数据拷贝到新的桶中，当然了不会拷贝全部，这是为了效率考虑的，</p> <h2 id="issues">issues</h2> <p><code>问题一：</code> <strong>map 元素可以取地址吗？</strong></p> <p><a href="/GOFamily/基础/其他内容/#go可寻址类型">不能</a>，map 元素 (例如 ma [“12”]) 属于结果值，所以无法获取地址</p> <p><code>问题二：</code> <strong>map 可以并发读写吗？可以 recover 吗？</strong></p> <p>map 是线程不安全类型，读写得加互斥锁；被 recover 的 Panic 有几项是不能的：</p> <ul><li>数据竞争 (比如：<strong>对 map 进行并发读写</strong>)</li></ul> <blockquote><p>可以通过 go 的编译标记 race 对代码进行检测是否存在数据竞争</p></blockquote> <ul><li>内存不足出现的 Panic</li> <li>死锁出现的 Panic</li></ul> <p><code>问题三：</code> <strong>sync.Map 适合的场景，和 map 加锁的区别</strong></p> <p>sync.Map 在读多写少性能比较好，否则并发性能很差</p> <blockquote><p>有关 sync.Map 的<a href="/GOFamily/工程/go标准库/sync.html#syncmap">详细内容</a></p></blockquote> <p>map 不支持并发的读或者是写 (go1.6 以后就不支持并发的读和写了，之前的版本支持并发的读，但是不支持并发的写)，所以 map+锁性能在读多写少和读少写多，读和写一样多的情况下是一样的。</p> <p>最优解是使用多把锁即：分段锁的方式，并发读写，大幅提高性能</p> <p><code>问题四：</code> <strong>在值为 nil 的字典上执行读操作会成功吗，那写操作呢？</strong></p> <p>答案是在值为 nil 的字典写会 Panic，读是没问题的。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 结果是int的一个初始值 0 </span>
  a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// panic</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>问题五：</code> <strong>为什么不用向下寻址式？</strong></p> <p>我们知道解决哈希碰撞的问题有向下寻址法，链表法，这是因为哈希函数只能把数据尽可能分布的均匀，如果哈希函数的输出的范围大于输入的范围，这是不现实的，这就要求映射无穷多，这显然不可能，所以必然会有两个不同的 key 算出来的哈希值是相同的，那么如果很多 key 算出的哈希值都是一样的，这就出现了查找效率从 O(1) 下降到了 O(n) 这就是所谓的哈希冲突。</p> <blockquote><p>这里提到的哈希值一样，有可能是后几位一样，也就是部分一样，比如后 9 位相同</p></blockquote> <p>向下寻址法的意思是：依次向下一位去探究是否是要找的哈希对，当然插入的时候也是这，向没有数据的地方插入，所以这种方法必须要使用数组这种结构，而且遍历的时候还得使用循环数组的这种思想 <code>index := hash(&quot;author&quot;) % array.len</code>，开放寻址法有一个数据指标叫做装载因子，就是说元素的个数/数组长度，一旦装载因子大于 70 %乃至 90 % 基本上就倒退为了 O(n) 的时间复杂度，并且底层是数组的情况下，必须使用连续的内存地址，并且数组长度是有限的，并且大概率会发生内存 padding 的情况，因为 kv 要存储在一起，这就又造成了更大的浪费。</p> <p>总结一下：不使用向下寻址使用拉链法的原因在于，1 可以利用碎片式的内存，2 不用内存 padding 造成浪费 3 原则上链表长度无限，可以无限增加。</p> <p><code>问题六：</code> <strong>map 如何操作真缩容？</strong></p> <p>可以使用 cap 重新生成一个 map，然后使用遍历的方式将老的 map 数据导入到新的小的 map 中，如果你知道数据不会再次增大的情况下是可以这么做的。</p> <h2 id="参考资料">参考资料</h2> <ul><li>https://github.com/golang/go/</li> <li>https://blog.csdn.net/EDDYCJY/article/details/120465701</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shgopher/GOFamily/edit/release/基础/map/README.md" target="_blank" rel="noopener noreferrer">在GitHub中编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">11/16/2023, 6:44:02 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/GOFamily/assets/js/app.6dac5fbf.js" defer></script><script src="/GOFamily/assets/js/2.5c331e53.js" defer></script><script src="/GOFamily/assets/js/7.5c52a687.js" defer></script>
  </body>
</html>
